<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>最全Hexo博客搭建及优化教程 | Young&#39;s Blog</title>
<meta name="keywords" content="Hexo, 博客搭建" />
<meta name="description" content="使用Hexo&#43;Github搭建一个免费的个人博客，本文略长，大佬请自行选择阅读。 前言 一边上班一边搭建博客，忙了大概有一周左右的时间，终于把博">
<meta name="author" content="">
<link rel="canonical" href="https://hiyoungai.com/posts/%E6%9C%80%E5%85%A8hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BC%98%E5%8C%96%E6%95%99%E7%A8%8B/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.7438e8fa4a8ff9cbdbe938fb56cc527f0717f7f7735c81f1e7d1308e895c406a.css" integrity="sha256-dDjo&#43;kqP&#43;cvb6Tj7VsxSfwcX9/dzXIHx59EwjolcQGo=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js" integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5&#43;kdJvBz5iKbt6B5PJI="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://hiyoungai.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://hiyoungai.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://hiyoungai.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://hiyoungai.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://hiyoungai.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.92.1" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="最全Hexo博客搭建及优化教程" />
<meta property="og:description" content="使用Hexo&#43;Github搭建一个免费的个人博客，本文略长，大佬请自行选择阅读。 前言 一边上班一边搭建博客，忙了大概有一周左右的时间，终于把博" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hiyoungai.com/posts/%E6%9C%80%E5%85%A8hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BC%98%E5%8C%96%E6%95%99%E7%A8%8B/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-13T18:23:54&#43;08:00" />
<meta property="article:modified_time" content="2022-02-13T18:23:54&#43;08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="最全Hexo博客搭建及优化教程"/>
<meta name="twitter:description" content="使用Hexo&#43;Github搭建一个免费的个人博客，本文略长，大佬请自行选择阅读。 前言 一边上班一边搭建博客，忙了大概有一周左右的时间，终于把博"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://hiyoungai.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "最全Hexo博客搭建及优化教程",
      "item": "https://hiyoungai.com/posts/%E6%9C%80%E5%85%A8hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BC%98%E5%8C%96%E6%95%99%E7%A8%8B/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "最全Hexo博客搭建及优化教程",
  "name": "最全Hexo博客搭建及优化教程",
  "description": "使用Hexo+Github搭建一个免费的个人博客，本文略长，大佬请自行选择阅读。 前言 一边上班一边搭建博客，忙了大概有一周左右的时间，终于把博",
  "keywords": [
    "Hexo", "博客搭建"
  ],
  "articleBody": " 使用Hexo+Github搭建一个免费的个人博客，本文略长，大佬请自行选择阅读。\n 前言 一边上班一边搭建博客，忙了大概有一周左右的时间，终于把博客都调好了。我使用的是Hexo框架，主题是闪烁之狐之狐的hexo-theme-matery，本文介绍的也是该主题的配置，大家如果喜欢可以去下载使用。\n本文除了介绍了matery主题的一些基础配置之外，也介绍了一些我个人和在其他大佬处看到的功能定制。只要你懂得操作软件，懂得键盘打字，那么就可以通过本教程搭建一个完全免费的个人博客。如果你是技术大佬，那么更可以通过修改源码去定制更好的功能。本文也记录了一些我搭建过程中遇到的坑，希望可以帮你在搭建过程中少走一些弯路，同时如果你也遇到一些本文没有记载的bug，也请你给我留言，让我们一起学习解决，多谢。\n第一部分：准备 1.Hexo介绍 Hexo是一款快速、简洁且高效的基于Node.js的静态博客框架，四大特性：\n 超快速度：Node.js 所带来的超快生成速度，让上百个页面在几秒内瞬间完成渲染。 支持Markdown：Hexo 支持 GitHub Flavored Markdown 的所有功能，甚至可以整合 Octopress 的大多数插件。 一键部署：只需一条指令即可部署到 GitHub Pages, Heroku或其他平台。 插件和可扩展性：强大的 API 带来无限的可能，与数种模板引擎（EJS，Pug，Nunjucks）和工具（Babel，PostCSS，Less/Sass）轻易集成。  这使得很多非编程人员可以很轻松，很自由的定制博客。废话不多说，开始进入搭建环境把。\n2.安装Node环境 Linux 直接命令行输入：\nsudo apt-get install nodejs sudo apt-get install npm 或者到官网下载：\n下载完成后解压到指定文件夹，然后配置环境变量（目的是为了在终端可以任意位置使用它）：\n首先打开~/.bashrc文件\nvim ~/.bashrc 在文件的最下端填写如下代码\nexport PATH=${PATH}:$HOME/node-v12.13.0-linux-x64/bin/ 因为我下载的是64位12.13.0版本，并且放到了根目录home下，你可以根据自己的需求进行更改上面的路径。保存退出后，执行命令让修改生效。\nsource ~/.bashrc 然后在终端输入npm -v和node -v验证是否安装配置成功\n$npm -v 6.13.0 $node -v v12.13.0 Windows 下载稳定版或者最新版都可以Node.js，安装选项全部默认，一路点击Next。最后安装好之后，按Win+R打开命令提示符，输入node -v和npm -v，如果出现版本号，那么就安装成功了。\nnpm加速 一般国内通过npm下载东西会比较慢，所以需要添加阿里的源进行加速。\nnpm config set registry https://registry.npm.taobao.org 3.安装Git 为了把本地的网页文件上传到Github上面去，我们需要用到分布式版本控制工具 git。关于git和Github这里就不多介绍了。同样分为两个版本：\nLinux 在Linux平台比较方便，直接使用命令就可以安装：\nsudo apt-get install git 安装完成后即可享用。\nWindows 需要去官网下载Git，下载完成后按照向导安装即可。\n 注意：在安装的最后一步添加路径时选择 Use Git from the Windows Command Prompt 。这是把Git添加到了环境变量中，以便可以在cmd中使用。而本人推荐使用下载附带的git bash进行操作，比较方便。\n 对于git的讲解和使用，大家可以自行到网上查找。Hexo搭建的过程中，已经封装好一个git命令，可以直接使用hexo的命令将生成的静态网站代码同步到github的仓库里。但是如果想要自己同步源码的话，那么就需要掌握一下git命令了。在这里我只列举一下常用的命令：\ngit init #初始化一个git库，生成.git文件夹，里面保存的是该git库的记录和配置 git remote add origin 远程仓库地址 #将本地仓库和远程仓库链接起来 git pull #同步代码 git status #检查本地仓库修改状态 git add 文件名 或者 git add . #将本地修改的文件加入缓存 git commit 文件名 -m \"描述\" 或者 git commit . -m \"描述\" #提交缓存，并描述该提交 git push -u origin code # 将本地的提交推送到远程仓库.-u是代表输入账号密码，如果你已经配置了git的公钥，那么可直接push. 4.注册Github Git安装完成之后就可以去Github上注册账号并创建仓库， 用来存放我们的网站了。\n Github是基于 Git 做版本控制的代码托管平台，同时也是全球最大的代（同）码（性）托（交）管（友）网站。\n 创建完账户之后新建一个项目仓库New repository，如下所示\n接着输入仓库名，后面一定要加.github.io后缀，README初始化也要勾上。 如下图配置（因为我的已经存在相同的仓库，所以报错）\n 要创建一个和你用户名相同的仓库，后面加.github.io，只有这样将来要部署到GitHub page的时候，才会被识别，也就是http://xxxx.github.io，其中xxx就是你注册GitHub的用户名\n 然后项目就建成了，点击Settings，向下拉到最后有个GitHub Pages，点击Choose a theme选择一个主题。然后等一会儿，再回到GitHub Pages，点击新出来的链接，就会进入到github page的界面。看到这个界面就说明Github的page已经可以使用了，接下来我们进入Hexo的搭建。\n第二部分：搭建 1.安装Hexo 首先创建一个文件夹，名字自取如YoungBlog，用来存放自己的博客文件，然后cd到这个文件夹下（或者在这个文件夹下直接右键git bash打开）。在该目录下输入如下命令安装Hexo：\nnpm install -g hexo-cli 接下来初始化一下hexo,即初始化我们的网站，\nhexo init  初始化要求必须是空的目录下进行。\n 接着输入npm install安装必备的组件。\n初始化完成后会在目下生成几个文件和文件夹，这些就是我们需要编写的网站源码了：\n node_modules: 依赖包，npm安装的一些插件存放的文件夹。 public：存放生成的页面，网站正式展示的内容。 scaffolds：生成文章和页面的一些模板。 source：用来存放你的文章和数据。 themes：主题存放文件夹。 _config.yml: 博客的配置文件，非主题的配置。 db.json：博客的版本信息等。 package.json和package-lock.json：依赖包和版本信息。  这样本地的网站配置也弄好啦，输入hexo g生成静态网页，然后输入hexo s打开本地服务器，然后浏览器打开http://localhost:4000就可以看到我们的博客啦，效果如下：\n这里介绍一下Hexo常用的几个命令：\nhexo clean #清除db和public文件下的内容，或可写成hexo cl hexo g #根据源码生成静态文件 hexo s #开启本地的server，这样可在本地通过localhost:4000访问博客。或可写成hexo server hexo d #部署网站的静态文件到配置好的托管网站，如Github或者Coding，配置在_config中的Deploy。 #后续如果安装了一些插件，可能导致缩写无法使用，所以hexo d也可以写成hexo deploy。 看完展示后，可以按ctrl+c关闭本地服务器。\n2.部署到Github 首先要安装一个插件，用于Hexo部署代码的。\nnpm i hexo-deployer-git 安装完成之后，在_config.yml配置文件中加入如下代码，这样我们在使用hexo d的时候就可以直接部署到Github上了，如果你想部署到其他平台（支持Git），也可以添加到这里。\ndeploy: type: git repository: https://github.com/hiyoung123/hiyoung123.github.io branch: master  如果不了解git那么请先自行百度学习一下git的相关配置。\n Git分为无密推送和需要输入账户密码推送。无密码推送就是需要在本地生成公钥，然后添加到代码托管平台如Github，这样在推送时候就不需要输入账户密码了。而反之的话，每次推送就会要求你输入账户密码。下面说一下无密推送的配置过程。\n首先打开Git bash，输入如下内容：\ngit config --global user.name \"你的用户名\" git config --global user.email \"你的邮箱\" 用户名和邮箱根据你注册github的信息自行修改。\n然后生成密钥SSH key：\nssh-keygen -t rsa -C \"你的邮箱\" 这个时候它会告诉你已经生成了.ssh的文件夹。在你的电脑中找到这个文件夹。或者git bash中输入\ncat ~/.ssh/id_rsa.pub 打开github，在头像下面点击settings，再点击SSH and GPG keys，新建一个SSH，名字随便取一个都可以，把你的id_rsa.pub里面的信息复制进去。\n这样你的电脑就跟Github建立起的安全联系，以后推送代码就不需要输入密码了。\n 注意：这里使用hexo d推送代码，推送的是编译完成的静态文件，也就是上面说的public文件夹下的代码，而不是网站的源代码。\n 3.写文章、发布文章 输入hexo new post \"article title\"，新建一篇文章。\n然后打开\\source\\_posts的目录，可以发现下面多了一个文件夹和一个.md文件，一个用来存放你的图片等数据，另一个就是你的文章文件啦。\n编写完markdown文件后，根目录下输入hexo g生成静态网页，然后输入hexo s可以本地预览效果，最后输入hexo d上传到github上。这时打开你的github.io主页就能看到发布的文章啦。\n4.绑定个人域名 现在默认的域名还是xxx.github.io，是不是很没有牌面？想不想也像我一样弄一个专属域名呢，首先你得购买一个域名，xx云都能买，看你个人喜好了。\n以我的阿里云为例，如下图所示，添加两条解析记录：\n我添加的是A记录，也就是需要添加IP地址的，你部署到Github的IP可以通过ping xxx.github.io获得。当然也可以添加CNAME记录，记录值填写xxx.github.io即可。\n解析域名完成后，需要在Github上加入你的域名。打开你的github博客项目，点击settings，拉到下面Custom domain处，填上你自己的域名，保存完成后如下图：\n 注意：如果下面的Enforce HTTPS 没有点击的话请勾选上。这个作用是使你的网络请求以更安全的HTTPS方式请求。\n 这时候你的项目根目录应该会出现一个名为CNAME的文件了，如果没有的话，打开你本地博客/source目录，新建CNAME文件，注意没有后缀。然后在里面写上你的域名，保存。因为每次推送代码的时候，都会把Github自动生成的CNAME文件删除掉，导致每次推送后域名和Github就失去了联系，我们在source/下自己创建一个CNAME文件，这样就可以永久保存了。\n5.备份博客源文件 这次我们提交到Github上的是博客的源代码，这样我们就可以在不同电脑上进行操作了。\n首先在github博客仓库下新建一个分支code，然后git clone到本地，把.git文件夹拿出来，放在博客根目录下（也可以博客根目录下执行git init , 然后 git remote add origin 远端仓库地址的方式）。然后git checkout code切换到code分支，然后git add .，然后git commit -m \"xxx\"，最后git push origin code提交就行了。\n第三部分：定制 这部分主要讲解一下主题的功能定制，除了基本的功能定制外，还有我参考各个大佬们的功能，有些我虽然没有加在我的博客上，但是也列在了此处。所以先在此处感谢一下各位大佬的博客文章。\n闪烁之狐的原版定制 | Godweiyang | 洪卫 | Sky03\n1.更换主题 下载主题，解压到博客目录下的themes目录，修改根目录下的 _config.yml 的 theme 的值：theme: hexo-theme-matery\n2.设置文章模板 Hexo的页面是包括一个md文件和ejs文件结合而成的，md文件中的内容是页面配置，基本信息，和显示的内容。而ejs文件就是js逻辑代码了。\n我们在scaffolds/post.md中设置文章的默认模板，这样以后创建文章的时候，这些信息就默认添加上了，不同文章你也可以修改这些信息。\n--- title: {{ title }} date: {{ date }} top: false cover: false password: toc: true mathjax: true summary: tags: categories: --- 3.添加404页面 原来的主题没有404页面，所以我们自己添加一个。首先在/source/目录下新建一个404.md，内容如下：\n--- title: 404 date: 2019-07-19 16:41:10 type: \"404\" layout: \"404\" description: \"你来到了没有知识的荒原 :(\" --- 然后在/themes/matery/layout/目录下新建一个404.ejs文件，内容如下：\n=\"text/css\" /* don't remove. */ .about-cover { height: 75vh; }  404         // 每天切换 banner 图. Switch banner image every day. $('.bg-cover').css('background-image', 'url(/medias/banner/' + new Date().getDay() + '.jpg)');  4.添加二级菜单 因为我使用的是最新版的主题代码，所以二级菜单可以直接在主题的配置文件_config.yml中配置，而不需要自己添加代码。如果你是老版本的主题，那么你可以参考上述两位大佬的博客进行添加代码。\n# 二级菜单写法如下 Medias: icon: fas fa-list children: - name: Books url: /books icon: fas fa-book - name: Musics url: /musics icon: fas fa-music - name: Movies url: /movies icon: fas fa-film - name: Galleries url: /galleries icon: fas fa-image 这样我们就可以在导航栏中看见媒体的图标以及二级图标了，不过由于我们没有创建对应的页面，所以无法看见内容。这里只举例说一下musics页面的创建。\n先使用命令创建musics对应的md文件\nhexo new page \"musics\" 这样就在source目录下生成一个musics目录了，里面包含一个index.md就是musics页面的配置文件了。我们填入对应layout的ejs文件\n--- title: musics date: 2019-11-14 23:41:25 type: \"musics\" layout: \"musics\" --- 然后在主题的layout目录下创建ejs文件，并写入如下内容：\n('_partial/bg-cover') % =\"content\" =\"contact\" class=\"container chip-container\" =\"card\" =\"card-content\" style=\"text-align: center\" =\"margin: 5px 0 5px 5px;\"如果你有好的内容推荐，欢迎在下面留言！   =\"card\" if (theme.gitalk \u0026\u0026 theme.gitalk.enable) { % ('_partial/gitalk') % } % if (theme.gitment.enable) { % ('_partial/gitment') % } % if (theme.disqus.enable) { % ('_partial/disqus') % } % if (theme.livere \u0026\u0026 theme.livere.enable) { % ('_partial/livere') % } % if (theme.valine \u0026\u0026 theme.valine.enable) { % ('_partial/valine') % } %    这样一个页面就创建好了，具体内容可自行修改，其他页面也是如此创建的。\n 这里有一个bug，就是二级菜单不显示中文，解决方法请见Debug部分。\n 5.图片添加水印 为了防止别人抄袭你文章，可以把所有的图片都加上水印，方法很简单。首先在博客根目录下新建一个watermark.py，代码如下：\n# -*- coding: utf-8 -*- import sys import glob from PIL import Image from PIL import ImageDraw from PIL import ImageFont def watermark(post_name): if post_name == 'all': post_name = '*' dir_name = 'source/_posts/' + post_name + '/*' for files in glob.glob(dir_name): im = Image.open(files) if len(im.getbands())  3: im = im.convert('RGB') print(files) font = ImageFont.truetype('STSONG.TTF', max(30, int(im.size[1] / 20))) draw = ImageDraw.Draw(im) draw.text((im.size[0] / 2, im.size[1] / 2), u'@hiyoung', fill=(0, 0, 0), font=font) im.save(files) if __name__ == '__main__': if len(sys.argv) == 2: watermark(sys.argv[1]) else: print('[usage] ') 字体也放根目录下，自己找字体。然后每次写完一篇文章可以运行python3 watermark.py postname添加水印，如果第一次运行要给所有文章添加水印，可以运行python3 watermark.py all。\n 这个代码的逻辑就是从文章目录下拿到图片，添加水印。这个前提是要文章的图片放在source/_posts/下，所以如果在文章中直接引用了其他地方的图片链接，那么这个脚本不会去给那个图片加水印了。\n 6.动态标签栏 这个功能我没有添加，只是简单的一段代码，在theme/matery/layout/layout.ejs下添加如下代码：\nscript type=\"text/javascript\" var OriginTitile = document.title, st; document.addEventListener(\"visibilitychange\", function () { document.hidden ? (document.title = \"Σ(っ °Д °;)っ喔哟，崩溃啦！\", clearTimeout(st)) : (document.title = \"φ(゜▽゜*)♪咦，又好了！\", st = setTimeout(function () { document.title = OriginTitile }, 3e3)) }) /script 7.添加豆瓣插件 我的二级菜单书单和电影都是通过豆瓣插件来添加内容的。\n首先安装插件：\nnpm install hexo-douban --save 将下面的配置写入博客的 _config.yml 文件里：\ndouban: user: #填写你的豆瓣id，打开豆瓣，登入账户，然后在右上角点击 ”个人主页“，url的后面就是id。 builtin: true book: title: '我的无味书屋！' quote: '沉醉于知识的hiyoung.' movie: title: '电影推荐' quote: '沉醉于电影的hiyoung.' #game:　不想要的内容可注释掉 # title: 'This is my game title' # quote: 'This is my game quote' timeout: 10000 然后创建对应的页面，在页面的ejs文件中添加如下代码：\n partial('_partial/bg-cover') % style .hexo-douban-picture img { width: 100%; } /style main class=\"content\" div id=\"contact\" class=\"container chip-container\" div class=\"card\" div class=\"card-content\" style=\"padding: 30px\" h1 style=\"margin: 10px 0 10px 0px;\" div class=\"tag-title center-align\" i class=\"fas fa-book\"/i\u0026nbsp;\u0026nbsp; /div /h1  page.content % /div /div div class=\"card\" div class=\"card-content\" style=\"text-align: center\" h3 style=\"margin: 5px 0 5px 5px;\"如果你有好的内容推荐，欢迎在下面留言！/h3 /div /div div class=\"card\"  if (theme.gitalk \u0026\u0026 theme.gitalk.enable) { %  partial('_partial/gitalk') %  } %  if (theme.gitment.enable) { %  partial('_partial/gitment') %  } %  if (theme.disqus.enable) { %  partial('_partial/disqus') %  } %  if (theme.livere \u0026\u0026 theme.livere.enable) { %  partial('_partial/livere') %  } %  if (theme.valine \u0026\u0026 theme.valine.enable) { %  partial('_partial/valine') %  } % /div /div /main 在你的博客文件夹内找到这个文件夹 /node_modules/hexo-douban/lib ，这个文件夹内找到以下三个文件： books-generator.js 、games-generator.js 、movies-generator.js\n将每个文件内最下面的：\nlayout: ['page', 'post'] 改为：\nlayout: ['page', 'books'] books是对应的呈现内容的ejs文件名。这样我们的豆瓣内容就设置完成了，可以进行编译部署了。\n 通常大家都喜欢用 hexo d 来作为 hexo deploy 命令的简化，但是当安装了 hexo douban 之后，就不能用 hexo d 了，因为 hexo douban 跟 hexo deploy 的前缀都是 hexo d ，你以后执行的 hexo d 将不再是 Hexo 页面的生成，而是豆瓣页面的生成。\n这里也说一下这个插件的逻辑，该插件通过你设置的豆瓣id，去爬取豆瓣信息。将爬取到的信息返回给对应的layout，然后进行展示。\n 8.统一友链卡片样式 我不喜欢原版的友链显示，所以统一了颜色，打开themes/matery/layout/friends.ejs文件，找到如下代码并修改：\n修改frends卡片，统一样式 -- div class=\"card frind-card\" 修改前-- div class=\"card frind-card1\" 它的样式颜色也在该文件中，各位可自行修改。\n9.添加交换友链卡片 在/source/friends/index.md文件中添加要交互的信息：\n# 友链交换 想要交换友链的大佬，欢迎在留言板留言，留言格式： * **名称：**Hiyoung * **地址：**https://hiyoungai.com/ * **简介：**宠辱不惊，看庭前花开花落；去留无意，望天空云卷云舒。 * **头像：**https://cdn.jsdelivr.net/gh/hiyoung123/cdn/img/avatar.jpg 然后在friends.ejs文件中的如下位置添加代码：\ndiv class=\"card\" div class=\"card-content\" div class=\"card-content article-card-content\" div id=\"articleContent\" data-aos=\"fade-up\"  page.content % /div /div /div /div div class=\"card\"  if (theme.gitalk \u0026\u0026 theme.gitalk.enable) { % 10.修改各菜单首图样式 修改各个页面的首图为本页面标题，而不是统一的网站标题。\n打开layout/_partial/bg-cover-content.ejs文件，找到如下代码：\ndiv class=\"title center-align\"  if (config.subtitle \u0026\u0026 config.subtitle.length  0) { %  config.subtitle %  } else { % subtitle  } % /div 修改为：\ndiv class=\"title center-align\"   if (config.subtitle \u0026\u0026 config.subtitle.length  0) { %  config.subtitle %  } else { % subtitle  } % --  if (is_archive()) { %  __('archives') %  } else if (is_category()) { %  __('categories') %  } else if (is_tag()) { %  __('tag') %  } else if (page.title \u0026\u0026 page.title.length  0) { %  __(page.title) %  } else { %  config.subtitle%  } % /div 11.在文章中添加网易云音乐 首先打开网易云网页版，找到想听的歌曲，然后点击生成外链，复制html代码。粘贴到文章里就行了，为了美观，设置一下居中，具体代码如下：\n=\"middle\"这里粘贴刚刚复制的代码 12.建站时间、卜算子计数、全站文字统计 新版本中已经集成了该功能，可以直接在主题的配置文件_config.yml中进行配置：\n首先需要安装插件：\nnpm i --save hexo-wordcount 然后在_config.yml配置：\nwordCount: enable: false # 将这个值设置为 true 即可. postWordCount: true min2read: true totalCount: true #需要添加这个字段，原版没有　全站文字统计配置 建站时间配置：\n# Website start time. # 站点运行开始时间. time: enable: true year: 2019 # 年份 month: 11 # 月份 date: 12 # 日期 hour: 00 # 小时 minute: 00 # 分钟 second: 00 # 秒 13.关于页面添加简历 修改/themes/matery/layout/about.ejs，找到标签，然后找到它对应的标签，接在后面新增一个card，语句如下：\n=\"card\" =\"card-content\" =\"card-content article-card-content\" =\"title center-align\" data-aos=\"zoom-in-up\" =\"fa fa-address-book\"\u0026nbsp;\u0026nbsp;('myCV') %  =\"articleContent\" data-aos=\"fade-up\"     这样就会多出一张card，然后可以在/source/about/index.md下面写上你的简历了，当然这里的位置随你自己设置，你也可以把简历作为第一个card。\n14.添加评论插件 主题已经自带了gitalk插件了，所以你只需要去github官网配置好就行了。\n首先打开github申请一个应用，要填四个东西：\nApplication name //应用名称，随便填 Homepage URL //填自己的博客地址 Application description //应用描述，随便填 Authorization callback URL //填自己的博客地址 然后点击注册，会出现两个字符串Client ID和Client Secret，这个要复制出来。\n然后去主题的配置文件_config.yml下修改gitalk那里：\ngitalk: enable: true owner: 你的github用户名 repo: 你的github用户名.github.io oauth: clientId: 粘贴刚刚注册完显示的字符串 clientSecret: 粘贴刚刚注册完显示的字符串 admin: 你的github用户名 以后写文章的时候，只要在文章页面登陆过github，就会自动创建评论框，记得每次写完文章后打开博客文章页面一下。\n15.添加RSS插件 npm install hexo-generator-feed --save 在Hexo根目录下的 _config.yml 文件中，新增以下的配置项：\nfeed: type: atom path: atom.xml limit: 20 hub: content: content_limit: 140 content_limit_delim: ' ' order_by: -date 执行 hexo clean \u0026\u0026 hexo g 重新生成博客文件，然后在 public 文件夹中即可看到 atom.xml 文件，说明你已经安装成功了。\n16.添加搜索插件 npm install hexo-generator-search --save 在根目录下的 _config.yml 文件中，新增以下的配置项：\nsearch: path: search.xml field: post 17.添加代码高亮插件 npm i -S hexo-prism-plugin 然后，修改根目录下 _config.yml 文件中 highlight.enable 的值为 false，并新增 prism 插件相关的配置，主要配置如下：\nhighlight: enable: false prism_plugin: mode: 'preprocess' # realtime/preprocess theme: 'tomorrow' line_number: false # default false custom_css: 18.修改打赏功能 在主题文件的 source/medias/reward 文件中，你可以替换成你的的微信和支付宝的打赏二维码图片。\n19.修改页脚 页脚信息可能需要做定制化修改，而且它不便于做成配置信息，所以可能需要你自己去再修改和加工。修改的地方在主题文件的 /layout/_partial/footer.ejs 文件中，包括站点、使用的主题、访问量等。\n20.修改社交链接 在主题的 _config.yml 文件中，默认支持 QQ、GitHub 和邮箱等的配置，你可以在主题文件的 /layout/_partial/social-link.ejs 文件中，新增、修改你需要的社交链接地址，增加链接可参考如下代码：\nif (theme.socialLink.github) { % =\"\" class=\"tooltipped\" target=\"_blank\" data-tooltip=\"访问我的GitHub\" data-position=\"top\" data-delay=\"50\" =\"fab fa-github\"  } % 其中，社交图标（如：fa-github）你可以在 Font Awesome 中搜索找到。以下是常用社交图标的标识，供你参考：\n Facebook: fab fa-facebook Twitter: fab fa-twitter Google-plus: fab fa-google-plus Linkedin: fab fa-linkedin Tumblr: fab fa-tumblr Medium: fab fa-medium Slack: fab fa-slack Sina Weibo: fab fa-weibo Wechat: fab fa-weixin QQ: fab fa-qq Zhihu: fab fa-zhihu  21.添加聊天功能 前往 DaoVoice 官网注册并且获取 app_id，并将 app_id 填入主题的 _config.yml 文件中。\n前往 Tidio 官网注册并且获取 Public Key，并将 Public Key 填入主题的 _config.yml 文件中。\n第四部分：优化 1.URL优化 使用插件优化url，插件hexo-abbrlink实现了这个功能，它将原来的URL地址重新进行了进制转换和再编码。\n安装hexo-abbrlink：\nnpm install hexo-abbrlink --save 配置博客根目录下的_config.yml文件。\n2.CDN优化 用法：\nhttps://cdn.jsdelivr.net/gh/你的用户名/你的仓库名@发布的版本号/文件路径 如本文的图片：\nhttps://cdn.jsdelivr.net/gh/hiyoung123/CDN/img/img_hexo_github_new_rep.png 3.压缩代码 首先安装插件：\nnpm install hexo-neat --save 在根目录配置文件 _config.yml 末尾加入以下配置：\n#hexo-neat 优化提速插件（去掉HTML、css、js的blank字符） neat_enable: true neat_html: enable: true exclude: - '**/*.md' neat_css: enable: true exclude: - '**/*.min.css' neat_js: enable: true mangle: true output: compress: exclude: - '**/*.min.js' - '**/**/instantpage.js' - '**/matery.js' 4.双部署到Coding Github \u0026 Coding Pages 双部署,对国内,国外用户进行分流访问,以提升网站的访问速度. Github Pages 的部署前面已经说了,这里就讲一讲 Coding Pages 如何部署.其实与 Github Pages 也类似,先到coding官网注册,创建一个与用户名同名的仓库,添加仓库地址到配置文件中,在根目录_config.yml对应地方添加如下:\ndeploy: - type: git repo: github: https://github.com/hiyoung123/hiyoung123.github.io coding: https://e.coding.net/hiyoung123/hiyoung123.coding.me.git branch: master 5.图片懒加载 安装插件：\nnpm install hexo-lazyload-image --save 然后在根目录配置文件末尾加入以下代码\nlazyload: enable: true onlypost: false # 是否只对文章的图片做懒加载 loadingImg: # eg ./images/loading.gif 但是一般情况下懒加载和gallery插件会发生冲突，结果可能就是点开图片，左翻右翻都是loading image。matery主题的解决方案是：修改 /themes/matery/source/js 中的 matery.js文件\n在第108行加上：\n$(document).find('img[data-original]').each(function(){ $(this).parent().attr(\"href\", $(this).attr(\"data-original\")); }); 做完这步之后，还有点小Bug，首页的logo点击会直接打开logo图，而不是跳到首页。\n伪解决方案：打开 /themes/matery/layout/_partial/header.ejs文件，\n在img和span的两个头加个div：\ndiv class=\"brand-logo\" a href=\"\" class=\"waves-effect waves-light\" div  if (theme.logo !== undefined \u0026\u0026 theme.logo.length  0) { % img src=\"\" class=\"logo-img\" alt=\"LOGO\"  } % span class=\"logo-span\" config.title %/span /div /a /div 其实第一次加载后本地都是有缓存的，如果每次都把loading显示出来就不那么好看。所以我们需要对插件进行魔改，让图片稍微提前加载，避开加载动画。\n打开 Hexo根目录node_modules  hexo-lazyload-image  lib  simple-lazyload.js 文件第9行修改为：\n\u0026\u0026 rect.top  (window.innerHeight +240 || document.documentElement.clientHeight +240) 作用：提前240个像素加载图片；当然这个值也可以根据自己情况修改。\n第五部分：Debug 1.解决部分菜单页面，标签栏不显示中文标题 首先需要去/themes/matery/languages/下，修改default.yml和zh-CN.yml添加对应的文字信息。\n接着在mobile-nav.ejs和navigation.ejs中添加如下代码：\nmenuMap.set(\"Medias\", \"媒体\"); menuMap.set(\"Books\", \"书单\"); menuMap.set(\"Musics\", \"音乐\"); menuMap.set(\"Videos\", \"视频\"); menuMap.set(\"Galleries\", \"相册\"); 找到下面的代码：\nspan childrenLink.name %/span 修改为：\n (config.language === 'zh-CN' \u0026\u0026 menuMap.has(childrenLink.name)) ? menuMap.get(childrenLink.name) : childrenLink.name % 并在head.ejs文件中修改：\nvar title = page.title; // tags, categories, about pages title  if (title == 'tags') { title = __('tags'); } else if (title == 'categories') { title = __('categories'); } else if (title == 'about') { title = __('about'); } else if (title == 'contact') { title = __('contact'); } else if (title == 'friends') { title = __('friends'); } else if (title == 'musics') { title = __('musics'); } else if (title == 'galleries') { title = __('galleries'); } 2.部署在coding中，使用www.访问域名时，出现404． 需要在coding部署设置中，绑定一下www的域名，同时需要申请证书。\n3.在coding中认证失败 如果申请失败的话，在域名解析处将境外的解析记录关掉，然后再去申请。申请成功后再打开境外的记录。\n4.使用neat插件压缩代码，导致鼠标点击特效消失 在压缩代码插件配置中修改为如下代码：\nneat_js: enable: true mangle: true output: compress: exclude: - '**/*.min.js' - '**/**/instantpage.js' - '**/matery.js' - '**/clicklove.js' #防止影响点击特效 5.卜算子区分www和不带www的域名，导致访问数无法同步。\n卜算子按照域名进行统计，带www和不带www的属于两个域名。可能需要重定向解决。\n使用cloudflare貌似可以做到域名重定向。\n更新 hexo 升级   打开 package.json，修改 dependencies 项：\n\"hexo\": \"^5.0.0\",   执行更新\nnpm update   更换butterfly主题   clone 项目到 themes 目录\ngit clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/hexo-theme-butterfly   安装对应插件\nnpm install hexo-renderer-pug hexo-renderer-stylus   修改_config.yml文件\n theme: hexo-theme-butterfly   执行构建等命令\nhexo clean \u0026 hexo g \u0026 hexo s   异常   prettyUrls is not a function\nnpm cache clean --force delete node_modules folder delete package-lock.json file npm install hexo clean; hexo g   鸣谢 再次感谢下面几位大佬的博客：\n闪烁之狐的原版定制 | Godweiyang | 洪卫 | Sky03\n",
  "wordCount" : "10362",
  "inLanguage": "zh",
  "datePublished": "2022-02-13T18:23:54+08:00",
  "dateModified": "2022-02-13T18:23:54+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://hiyoungai.com/posts/%E6%9C%80%E5%85%A8hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BC%98%E5%8C%96%E6%95%99%E7%A8%8B/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Young's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://hiyoungai.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://hiyoungai.com/" accesskey="h" title="Young&#39;s Blog (Alt + H)">Young&#39;s Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://hiyoungai.com/" title="主页">
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="https://hiyoungai.com/posts/" title="文章">
                    <span>文章</span>
                </a>
            </li>
            <li>
                <a href="https://hiyoungai.com/archives/" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="https://hiyoungai.com/tags/" title="标签">
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="https://hiyoungai.com/about/" title="关于">
                    <span>关于</span>
                </a>
            </li>
            <li>
                <a href="https://hiyoungai.com/search/" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span>搜索</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://hiyoungai.com/">主页</a>&nbsp;»&nbsp;<a href="https://hiyoungai.com/posts/">Posts</a></div>
    <h1 class="post-title">
      最全Hexo博客搭建及优化教程
    </h1>
    <div class="post-meta">










创建:&nbsp;<span title='2022-02-13 18:23:54 +0800 CST'>2022-02-13</span>&nbsp;|&nbsp;字数:&nbsp;10362字&nbsp;|&nbsp;时长: 21分钟

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目录</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e5%89%8d%e8%a8%80" aria-label="前言">前言</a></li>
                    <li>
                        <a href="#%e7%ac%ac%e4%b8%80%e9%83%a8%e5%88%86%e5%87%86%e5%a4%87" aria-label="第一部分：准备">第一部分：准备</a><ul>
                            
                    <li>
                        <a href="#1hexo%e4%bb%8b%e7%bb%8d" aria-label="1.Hexo介绍">1.Hexo介绍</a></li>
                    <li>
                        <a href="#2%e5%ae%89%e8%a3%85node%e7%8e%af%e5%a2%83" aria-label="2.安装Node环境">2.安装Node环境</a><ul>
                            
                    <li>
                        <a href="#linux" aria-label="Linux">Linux</a></li>
                    <li>
                        <a href="#windows" aria-label="Windows">Windows</a></li>
                    <li>
                        <a href="#npm%e5%8a%a0%e9%80%9f" aria-label="npm加速">npm加速</a></li></ul>
                    </li>
                    <li>
                        <a href="#3%e5%ae%89%e8%a3%85git" aria-label="3.安装Git">3.安装Git</a><ul>
                            
                    <li>
                        <a href="#linux-1" aria-label="Linux">Linux</a></li>
                    <li>
                        <a href="#windows-1" aria-label="Windows">Windows</a></li></ul>
                    </li>
                    <li>
                        <a href="#4%e6%b3%a8%e5%86%8cgithub" aria-label="4.注册Github">4.注册Github</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e7%ac%ac%e4%ba%8c%e9%83%a8%e5%88%86%e6%90%ad%e5%bb%ba" aria-label="第二部分：搭建">第二部分：搭建</a><ul>
                            
                    <li>
                        <a href="#1%e5%ae%89%e8%a3%85hexo" aria-label="1.安装Hexo">1.安装Hexo</a></li>
                    <li>
                        <a href="#2%e9%83%a8%e7%bd%b2%e5%88%b0github" aria-label="2.部署到Github">2.部署到Github</a></li>
                    <li>
                        <a href="#3%e5%86%99%e6%96%87%e7%ab%a0%e5%8f%91%e5%b8%83%e6%96%87%e7%ab%a0" aria-label="3.写文章、发布文章">3.写文章、发布文章</a></li>
                    <li>
                        <a href="#4%e7%bb%91%e5%ae%9a%e4%b8%aa%e4%ba%ba%e5%9f%9f%e5%90%8d" aria-label="4.绑定个人域名">4.绑定个人域名</a></li>
                    <li>
                        <a href="#5%e5%a4%87%e4%bb%bd%e5%8d%9a%e5%ae%a2%e6%ba%90%e6%96%87%e4%bb%b6" aria-label="5.备份博客源文件">5.备份博客源文件</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e7%ac%ac%e4%b8%89%e9%83%a8%e5%88%86%e5%ae%9a%e5%88%b6" aria-label="第三部分：定制">第三部分：定制</a><ul>
                            
                    <li>
                        <a href="#1%e6%9b%b4%e6%8d%a2%e4%b8%bb%e9%a2%98" aria-label="1.更换主题">1.更换主题</a></li>
                    <li>
                        <a href="#2%e8%ae%be%e7%bd%ae%e6%96%87%e7%ab%a0%e6%a8%a1%e6%9d%bf" aria-label="2.设置文章模板">2.设置文章模板</a></li>
                    <li>
                        <a href="#3%e6%b7%bb%e5%8a%a0404%e9%a1%b5%e9%9d%a2" aria-label="3.添加404页面">3.添加404页面</a></li>
                    <li>
                        <a href="#4%e6%b7%bb%e5%8a%a0%e4%ba%8c%e7%ba%a7%e8%8f%9c%e5%8d%95" aria-label="4.添加二级菜单">4.添加二级菜单</a></li>
                    <li>
                        <a href="#5%e5%9b%be%e7%89%87%e6%b7%bb%e5%8a%a0%e6%b0%b4%e5%8d%b0" aria-label="5.图片添加水印">5.图片添加水印</a></li>
                    <li>
                        <a href="#6%e5%8a%a8%e6%80%81%e6%a0%87%e7%ad%be%e6%a0%8f" aria-label="6.动态标签栏">6.动态标签栏</a></li>
                    <li>
                        <a href="#7%e6%b7%bb%e5%8a%a0%e8%b1%86%e7%93%a3%e6%8f%92%e4%bb%b6" aria-label="7.添加豆瓣插件">7.添加豆瓣插件</a></li>
                    <li>
                        <a href="#8%e7%bb%9f%e4%b8%80%e5%8f%8b%e9%93%be%e5%8d%a1%e7%89%87%e6%a0%b7%e5%bc%8f" aria-label="8.统一友链卡片样式">8.统一友链卡片样式</a></li>
                    <li>
                        <a href="#9%e6%b7%bb%e5%8a%a0%e4%ba%a4%e6%8d%a2%e5%8f%8b%e9%93%be%e5%8d%a1%e7%89%87" aria-label="9.添加交换友链卡片">9.添加交换友链卡片</a></li>
                    <li>
                        <a href="#10%e4%bf%ae%e6%94%b9%e5%90%84%e8%8f%9c%e5%8d%95%e9%a6%96%e5%9b%be%e6%a0%b7%e5%bc%8f" aria-label="10.修改各菜单首图样式">10.修改各菜单首图样式</a></li>
                    <li>
                        <a href="#11%e5%9c%a8%e6%96%87%e7%ab%a0%e4%b8%ad%e6%b7%bb%e5%8a%a0%e7%bd%91%e6%98%93%e4%ba%91%e9%9f%b3%e4%b9%90" aria-label="11.在文章中添加网易云音乐">11.在文章中添加网易云音乐</a></li>
                    <li>
                        <a href="#12%e5%bb%ba%e7%ab%99%e6%97%b6%e9%97%b4%e5%8d%9c%e7%ae%97%e5%ad%90%e8%ae%a1%e6%95%b0%e5%85%a8%e7%ab%99%e6%96%87%e5%ad%97%e7%bb%9f%e8%ae%a1" aria-label="12.建站时间、卜算子计数、全站文字统计">12.建站时间、卜算子计数、全站文字统计</a></li>
                    <li>
                        <a href="#13%e5%85%b3%e4%ba%8e%e9%a1%b5%e9%9d%a2%e6%b7%bb%e5%8a%a0%e7%ae%80%e5%8e%86" aria-label="13.关于页面添加简历">13.关于页面添加简历</a></li>
                    <li>
                        <a href="#14%e6%b7%bb%e5%8a%a0%e8%af%84%e8%ae%ba%e6%8f%92%e4%bb%b6" aria-label="14.添加评论插件">14.添加评论插件</a></li>
                    <li>
                        <a href="#15%e6%b7%bb%e5%8a%a0rss%e6%8f%92%e4%bb%b6" aria-label="15.添加RSS插件">15.添加RSS插件</a></li>
                    <li>
                        <a href="#16%e6%b7%bb%e5%8a%a0%e6%90%9c%e7%b4%a2%e6%8f%92%e4%bb%b6" aria-label="16.添加搜索插件">16.添加搜索插件</a></li>
                    <li>
                        <a href="#17%e6%b7%bb%e5%8a%a0%e4%bb%a3%e7%a0%81%e9%ab%98%e4%ba%ae%e6%8f%92%e4%bb%b6" aria-label="17.添加代码高亮插件">17.添加代码高亮插件</a></li>
                    <li>
                        <a href="#18%e4%bf%ae%e6%94%b9%e6%89%93%e8%b5%8f%e5%8a%9f%e8%83%bd" aria-label="18.修改打赏功能">18.修改打赏功能</a></li>
                    <li>
                        <a href="#19%e4%bf%ae%e6%94%b9%e9%a1%b5%e8%84%9a" aria-label="19.修改页脚">19.修改页脚</a></li>
                    <li>
                        <a href="#20%e4%bf%ae%e6%94%b9%e7%a4%be%e4%ba%a4%e9%93%be%e6%8e%a5" aria-label="20.修改社交链接">20.修改社交链接</a></li>
                    <li>
                        <a href="#21%e6%b7%bb%e5%8a%a0%e8%81%8a%e5%a4%a9%e5%8a%9f%e8%83%bd" aria-label="21.添加聊天功能">21.添加聊天功能</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e7%ac%ac%e5%9b%9b%e9%83%a8%e5%88%86%e4%bc%98%e5%8c%96" aria-label="第四部分：优化">第四部分：优化</a><ul>
                            
                    <li>
                        <a href="#1url%e4%bc%98%e5%8c%96" aria-label="1.URL优化">1.URL优化</a></li>
                    <li>
                        <a href="#2cdn%e4%bc%98%e5%8c%96" aria-label="2.CDN优化">2.CDN优化</a></li>
                    <li>
                        <a href="#3%e5%8e%8b%e7%bc%a9%e4%bb%a3%e7%a0%81" aria-label="3.压缩代码">3.压缩代码</a></li>
                    <li>
                        <a href="#4%e5%8f%8c%e9%83%a8%e7%bd%b2%e5%88%b0coding" aria-label="4.双部署到Coding">4.双部署到Coding</a></li>
                    <li>
                        <a href="#5%e5%9b%be%e7%89%87%e6%87%92%e5%8a%a0%e8%bd%bd" aria-label="5.图片懒加载">5.图片懒加载</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e7%ac%ac%e4%ba%94%e9%83%a8%e5%88%86debug" aria-label="第五部分：Debug">第五部分：Debug</a><ul>
                            
                    <li>
                        <a href="#1%e8%a7%a3%e5%86%b3%e9%83%a8%e5%88%86%e8%8f%9c%e5%8d%95%e9%a1%b5%e9%9d%a2%e6%a0%87%e7%ad%be%e6%a0%8f%e4%b8%8d%e6%98%be%e7%a4%ba%e4%b8%ad%e6%96%87%e6%a0%87%e9%a2%98" aria-label="1.解决部分菜单页面，标签栏不显示中文标题">1.解决部分菜单页面，标签栏不显示中文标题</a></li>
                    <li>
                        <a href="#2%e9%83%a8%e7%bd%b2%e5%9c%a8coding%e4%b8%ad%e4%bd%bf%e7%94%a8www%e8%ae%bf%e9%97%ae%e5%9f%9f%e5%90%8d%e6%97%b6%e5%87%ba%e7%8e%b0404" aria-label="2.部署在coding中，使用www.访问域名时，出现404．">2.部署在coding中，使用www.访问域名时，出现404．</a></li>
                    <li>
                        <a href="#3%e5%9c%a8coding%e4%b8%ad%e8%ae%a4%e8%af%81%e5%a4%b1%e8%b4%a5" aria-label="3.在coding中认证失败">3.在coding中认证失败</a></li>
                    <li>
                        <a href="#4%e4%bd%bf%e7%94%a8neat%e6%8f%92%e4%bb%b6%e5%8e%8b%e7%bc%a9%e4%bb%a3%e7%a0%81%e5%af%bc%e8%87%b4%e9%bc%a0%e6%a0%87%e7%82%b9%e5%87%bb%e7%89%b9%e6%95%88%e6%b6%88%e5%a4%b1" aria-label="4.使用neat插件压缩代码，导致鼠标点击特效消失">4.使用neat插件压缩代码，导致鼠标点击特效消失</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e6%9b%b4%e6%96%b0" aria-label="更新">更新</a><ul>
                            
                    <li>
                        <a href="#hexo-%e5%8d%87%e7%ba%a7" aria-label="hexo 升级">hexo 升级</a></li>
                    <li>
                        <a href="#%e6%9b%b4%e6%8d%a2butterfly%e4%b8%bb%e9%a2%98" aria-label="更换butterfly主题">更换butterfly主题</a></li>
                    <li>
                        <a href="#%e5%bc%82%e5%b8%b8" aria-label="异常">异常</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e9%b8%a3%e8%b0%a2" aria-label="鸣谢">鸣谢</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><blockquote>
<p>使用Hexo+Github搭建一个免费的个人博客，本文略长，大佬请自行选择阅读。</p>
</blockquote>
<h2 id="前言">前言<a hidden class="anchor" aria-hidden="true" href="#前言">#</a></h2>
<p>一边上班一边搭建博客，忙了大概有一周左右的时间，终于把博客都调好了。我使用的是<code>Hexo</code>框架，主题是闪烁之狐之狐的<a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md">hexo-theme-matery</a>，本文介绍的也是该主题的配置，大家如果喜欢可以去下载使用。</p>
<p>本文除了介绍了<code>matery</code>主题的一些基础配置之外，也介绍了一些我个人和在其他大佬处看到的功能定制。只要你懂得操作软件，懂得键盘打字，那么就可以通过本教程搭建一个完全<code>免费</code>的个人博客。如果你是技术大佬，那么更可以通过修改源码去定制更好的功能。本文也记录了一些我搭建过程中遇到的坑，希望可以帮你在搭建过程中少走一些弯路，同时如果你也遇到一些本文没有记载的<em>bug</em>，也请你给我留言，让我们一起学习解决，多谢。</p>
<h2 id="第一部分准备">第一部分：准备<a hidden class="anchor" aria-hidden="true" href="#第一部分准备">#</a></h2>
<h3 id="1hexo介绍">1.Hexo介绍<a hidden class="anchor" aria-hidden="true" href="#1hexo介绍">#</a></h3>
<p><a href="https://hexo.io/zh-cn/">Hexo</a>是一款快速、简洁且高效的基于<code>Node.js</code>的静态博客框架，四大特性：</p>
<ul>
<li>超快速度：<code>Node.js</code> 所带来的超快生成速度，让上百个页面在几秒内瞬间完成渲染。</li>
<li>支持Markdown：<code>Hexo</code> 支持 <code>GitHub Flavored Markdown</code> 的所有功能，甚至可以整合 <code>Octopress</code> 的大多数插件。</li>
<li>一键部署：只需一条指令即可部署到 <code>GitHub Pages</code>, <code>Heroku</code>或其他平台。</li>
<li>插件和可扩展性：强大的 <code>API</code> 带来无限的可能，与数种模板引擎<code>（EJS，Pug，Nunjucks）</code>和工具<code>（Babel，PostCSS，Less/Sass）</code>轻易集成。</li>
</ul>
<p>这使得很多非编程人员可以很轻松，很自由的定制博客。废话不多说，开始进入搭建环境把。</p>
<h3 id="2安装node环境">2.安装Node环境<a hidden class="anchor" aria-hidden="true" href="#2安装node环境">#</a></h3>
<h4 id="linux">Linux<a hidden class="anchor" aria-hidden="true" href="#linux">#</a></h4>
<p>直接命令行输入：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get install nodejs
sudo apt-get install npm
</code></pre></div><p>或者到<a href="http://nodejs.cn/download/">官网</a>下载：</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/hiyoung123/images/img/img_hexo_download_nodejs_1.png" alt=""  />
</p>
<p>下载完成后解压到指定文件夹，然后配置环境变量（目的是为了在终端可以任意位置使用它）：</p>
<p>首先打开<code>~/.bashrc</code>文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vim ~/.bashrc
</code></pre></div><p>在文件的最下端填写如下代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">export PATH<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>PATH<span style="color:#e6db74">}</span>:$HOME/node-v12.13.0-linux-x64/bin/
</code></pre></div><p>因为我下载的是<code>64</code>位<code>12.13.0</code>版本，并且放到了根目录<code>home</code>下，你可以根据自己的需求进行更改上面的路径。保存退出后，执行命令让修改生效。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">source ~/.bashrc
</code></pre></div><p>然后在终端输入<code>npm -v</code>和<code>node -v</code>验证是否安装配置成功</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$npm -v
6.13.0

$node -v
v12.13.0
</code></pre></div><h4 id="windows">Windows<a hidden class="anchor" aria-hidden="true" href="#windows">#</a></h4>
<p>下载稳定版或者最新版都可以<a href="http://nodejs.cn/download/">Node.js</a>，安装选项全部默认，一路点击<code>Next</code>。最后安装好之后，按<code>Win+R</code>打开命令提示符，输入<code>node -v</code>和<code>npm -v</code>，如果出现版本号，那么就安装成功了。</p>
<h4 id="npm加速">npm加速<a hidden class="anchor" aria-hidden="true" href="#npm加速">#</a></h4>
<p>一般国内通过<code>npm</code>下载东西会比较慢，所以需要添加阿里的源进行加速。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm config set registry https://registry.npm.taobao.org
</code></pre></div><h3 id="3安装git">3.安装Git<a hidden class="anchor" aria-hidden="true" href="#3安装git">#</a></h3>
<p>为了把本地的网页文件上传到<code>Github</code>上面去，我们需要用到分布式版本控制工具 <code>git</code>。关于<code>git</code>和<code>Github</code>这里就不多介绍了。同样分为两个版本：</p>
<h4 id="linux-1">Linux<a hidden class="anchor" aria-hidden="true" href="#linux-1">#</a></h4>
<p>在Linux平台比较方便，直接使用命令就可以安装：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get install git
</code></pre></div><p>安装完成后即可享用。</p>
<h4 id="windows-1">Windows<a hidden class="anchor" aria-hidden="true" href="#windows-1">#</a></h4>
<p>需要去官网下载<a href="https://git-scm.com/download/win">Git</a>，下载完成后按照向导安装即可。</p>
<blockquote>
<p>注意：在安装的最后一步添加路径时选择 Use Git from the Windows Command Prompt 。这是把Git添加到了环境变量中，以便可以在cmd中使用。而本人推荐使用下载附带的git bash进行操作，比较方便。</p>
</blockquote>
<p>对于git的讲解和使用，大家可以自行到网上查找。<code>Hexo</code>搭建的过程中，已经封装好一个git命令，可以直接使用<code>hexo</code>的命令将生成的静态网站代码同步到<code>github</code>的仓库里。但是如果想要自己同步源码的话，那么就需要掌握一下git命令了。在这里我只列举一下常用的命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git init <span style="color:#75715e">#初始化一个git库，生成.git文件夹，里面保存的是该git库的记录和配置</span>
git remote add origin 远程仓库地址 <span style="color:#75715e">#将本地仓库和远程仓库链接起来</span>
git pull <span style="color:#75715e">#同步代码</span>
git status <span style="color:#75715e">#检查本地仓库修改状态</span>
git add 文件名 或者 git add .  <span style="color:#75715e">#将本地修改的文件加入缓存</span>
git commit 文件名 -m <span style="color:#e6db74">&#34;描述&#34;</span> 或者 git commit . -m <span style="color:#e6db74">&#34;描述&#34;</span>  <span style="color:#75715e">#提交缓存，并描述该提交</span>
git push -u origin code 
<span style="color:#75715e"># 将本地的提交推送到远程仓库.-u是代表输入账号密码，如果你已经配置了git的公钥，那么可直接push.</span>
</code></pre></div><h3 id="4注册github">4.注册Github<a hidden class="anchor" aria-hidden="true" href="#4注册github">#</a></h3>
<p><code>Git</code>安装完成之后就可以去<a href="https://github.com/">Github</a>上注册账号并创建仓库， 用来存放我们的网站了。</p>
<blockquote>
<p>Github是基于 Git 做版本控制的代码托管平台，同时也是全球最大的代（同）码（性）托（交）管（友）网站。</p>
</blockquote>
<p>创建完账户之后新建一个项目仓库<code>New repository</code>，如下所示</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/hiyoung123/images/img/img_hexo_github_new_rep.png" alt=""  />
</p>
<p>接着输入仓库名，后面一定要加<code>.github.io</code>后缀，README初始化也要勾上。 如下图配置（因为我的已经存在相同的仓库，所以报错）</p>
<blockquote>
<p>要创建一个和你用户名相同的仓库，后面加.github.io，只有这样将来要部署到GitHub page的时候，才会被识别，也就是http://xxxx.github.io，其中xxx就是你注册<code>GitHub</code>的用户名</p>
</blockquote>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/hiyoung123/images/img/img_hexo_github_creat_rep.png" alt=""  />
</p>
<p>然后项目就建成了，点击<code>Settings</code>，向下拉到最后有个<code>GitHub Pages</code>，点击<code>Choose a theme</code>选择一个主题。然后等一会儿，再回到<code>GitHub Pages</code>，点击新出来的链接，就会进入到<code>github page</code>的界面。看到这个界面就说明<code>Github</code>的<code>page</code>已经可以使用了，接下来我们进入<code>Hexo</code>的搭建。</p>
<h2 id="第二部分搭建">第二部分：搭建<a hidden class="anchor" aria-hidden="true" href="#第二部分搭建">#</a></h2>
<h3 id="1安装hexo">1.安装Hexo<a hidden class="anchor" aria-hidden="true" href="#1安装hexo">#</a></h3>
<p>首先创建一个文件夹，名字自取如<code>YoungBlog</code>，用来存放自己的博客文件，然后<code>cd</code>到这个文件夹下（或者在这个文件夹下直接右键<code>git bash</code>打开）。在该目录下输入如下命令安装<code>Hexo</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install -g hexo-cli
</code></pre></div><p>接下来初始化一下<code>hexo</code>,即初始化我们的网站，</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">hexo init
</code></pre></div><blockquote>
<p>初始化要求必须是空的目录下进行。</p>
</blockquote>
<p>接着输入<code>npm install</code>安装必备的组件。</p>
<p>初始化完成后会在目下生成几个文件和文件夹，这些就是我们需要编写的网站源码了：</p>
<ul>
<li><code>node_modules:</code> 依赖包，npm安装的一些插件存放的文件夹。</li>
<li><code>public：</code>存放生成的页面，网站正式展示的内容。</li>
<li><code>scaffolds：</code>生成文章和页面的一些模板。</li>
<li><code>source：</code>用来存放你的文章和数据。</li>
<li><code>themes：</code>主题存放文件夹。</li>
<li><code>_config.yml:</code> 博客的配置文件，非主题的配置。</li>
<li><code>db.json</code>：博客的版本信息等。</li>
<li><code>package.json</code>和<code>package-lock.json</code>：依赖包和版本信息。</li>
</ul>
<p>这样本地的网站配置也弄好啦，输入<code>hexo g</code>生成静态网页，然后输入<code>hexo s</code>打开本地服务器，然后浏览器打开<a href="http://localhost:4000">http://localhost:4000</a>就可以看到我们的博客啦，效果如下：</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/hiyoung123/images/img/img_hexo_web_1.png" alt=""  />
</p>
<p>这里介绍一下<code>Hexo</code>常用的几个命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">hexo clean <span style="color:#75715e">#清除db和public文件下的内容，或可写成hexo cl</span>
hexo g <span style="color:#75715e">#根据源码生成静态文件</span>
hexo s <span style="color:#75715e">#开启本地的server，这样可在本地通过localhost:4000访问博客。或可写成hexo server</span>
hexo d <span style="color:#75715e">#部署网站的静态文件到配置好的托管网站，如Github或者Coding，配置在_config中的Deploy。</span>
<span style="color:#75715e">#后续如果安装了一些插件，可能导致缩写无法使用，所以hexo d也可以写成hexo deploy。</span>
</code></pre></div><p>看完展示后，可以按<code>ctrl+c</code>关闭本地服务器。</p>
<h3 id="2部署到github">2.部署到Github<a hidden class="anchor" aria-hidden="true" href="#2部署到github">#</a></h3>
<p>首先要安装一个插件，用于<code>Hexo</code>部署代码的。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm i hexo-deployer-git
</code></pre></div><p>安装完成之后，在<code>_config.yml</code>配置文件中加入如下代码，这样我们在使用<code>hexo d</code>的时候就可以直接部署到<code>Github</code>上了，如果你想部署到其他平台（支持<code>Git</code>），也可以添加到这里。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">deploy:
  type: git
  repository: https://github.com/hiyoung123/hiyoung123.github.io
  branch: master
</code></pre></div><blockquote>
<p>如果不了解git那么请先自行百度学习一下git的相关配置。</p>
</blockquote>
<p><code>Git</code>分为无密推送和需要输入账户密码推送。无密码推送就是需要在本地生成公钥，然后添加到代码托管平台如<code>Github</code>，这样在推送时候就不需要输入账户密码了。而反之的话，每次推送就会要求你输入账户密码。下面说一下无密推送的配置过程。</p>
<p>首先打开<code>Git bash</code>，输入如下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git config --global user.name <span style="color:#e6db74">&#34;你的用户名&#34;</span>
git config --global user.email <span style="color:#e6db74">&#34;你的邮箱&#34;</span>
</code></pre></div><p>用户名和邮箱根据你注册<code>github</code>的信息自行修改。</p>
<p>然后生成密钥SSH key：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ssh-keygen -t rsa -C <span style="color:#e6db74">&#34;你的邮箱&#34;</span>
</code></pre></div><p>这个时候它会告诉你已经生成了<code>.ssh</code>的文件夹。在你的电脑中找到这个文件夹。或者<code>git bash</code>中输入</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cat ~/.ssh/id_rsa.pub
</code></pre></div><p>打开<a href="http://github.com/">github</a>，在头像下面点击<code>settings</code>，再点击<code>SSH and GPG keys</code>，新建一个<code>SSH</code>，名字随便取一个都可以，把你的<code>id_rsa.pub</code>里面的信息复制进去。</p>
<p>这样你的电脑就跟<code>Github</code>建立起的安全联系，以后推送代码就不需要输入密码了。</p>
<blockquote>
<p>注意：这里使用hexo d推送代码，推送的是编译完成的静态文件，也就是上面说的public文件夹下的代码，而不是网站的源代码。</p>
</blockquote>
<h3 id="3写文章发布文章">3.写文章、发布文章<a hidden class="anchor" aria-hidden="true" href="#3写文章发布文章">#</a></h3>
<p>输入<code>hexo new post &quot;article title&quot;</code>，新建一篇文章。</p>
<p>然后打开<code>\source\_posts</code>的目录，可以发现下面多了一个文件夹和一个<code>.md</code>文件，一个用来存放你的图片等数据，另一个就是你的文章文件啦。</p>
<p>编写完markdown文件后，根目录下输入<code>hexo g</code>生成静态网页，然后输入<code>hexo s</code>可以本地预览效果，最后输入<code>hexo d</code>上传到<code>github</code>上。这时打开你的<code>github.io</code>主页就能看到发布的文章啦。</p>
<h3 id="4绑定个人域名">4.绑定个人域名<a hidden class="anchor" aria-hidden="true" href="#4绑定个人域名">#</a></h3>
<p>现在默认的域名还是<code>xxx.github.io</code>，是不是很没有牌面？想不想也像我一样弄一个专属域名呢，首先你得购买一个域名，xx云都能买，看你个人喜好了。</p>
<p>以我的阿里云为例，如下图所示，添加两条解析记录：</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/hiyoung123/images/img/img_hexo_add_domin.png" alt=""  />
</p>
<p>我添加的是A记录，也就是需要添加<code>IP</code>地址的，你部署到<code>Github</code>的<code>IP</code>可以通过<code>ping xxx.github.io</code>获得。当然也可以添加<code>CNAME</code>记录，记录值填写<code>xxx.github.io</code>即可。</p>
<p>解析域名完成后，需要在<code>Github</code>上加入你的域名。打开你的<code>github</code>博客项目，点击<code>settings</code>，拉到下面<code>Custom domain</code>处，填上你自己的域名，保存完成后如下图：</p>
<p><img loading="lazy" src="https://cdn.jsdelivr.net/gh/hiyoung123/images/img/img_hexo_add_domin_github.png" alt=""  />
</p>
<blockquote>
<p>注意：如果下面的Enforce HTTPS 没有点击的话请勾选上。这个作用是使你的网络请求以更安全的HTTPS方式请求。</p>
</blockquote>
<p>这时候你的项目根目录应该会出现一个名为<code>CNAME</code>的文件了，如果没有的话，打开你本地博客<code>/source</code>目录，新建<code>CNAME</code>文件，注意没有后缀。然后在里面写上你的域名，保存。因为每次推送代码的时候，都会把<code>Github</code>自动生成的<code>CNAME</code>文件删除掉，导致每次推送后域名和<code>Github</code>就失去了联系，我们在<code>source/</code>下自己创建一个<code>CNAME</code>文件，这样就可以永久保存了。</p>
<h3 id="5备份博客源文件">5.备份博客源文件<a hidden class="anchor" aria-hidden="true" href="#5备份博客源文件">#</a></h3>
<p>这次我们提交到<code>Github</code>上的是博客的源代码，这样我们就可以在不同电脑上进行操作了。</p>
<p>首先在<code>github</code>博客仓库下新建一个分支<code>code</code>，然后<code>git clone</code>到本地，把<code>.git</code>文件夹拿出来，放在博客根目录下（也可以博客根目录下执行<code>git init</code> , 然后 <code>git remote add origin 远端仓库地址的方式</code>）。然后<code>git checkout code</code>切换到<code>code</code>分支，然后<code>git add .</code>，然后<code>git commit -m &quot;xxx&quot;</code>，最后<code>git push origin code</code>提交就行了。</p>
<h2 id="第三部分定制">第三部分：定制<a hidden class="anchor" aria-hidden="true" href="#第三部分定制">#</a></h2>
<p>这部分主要讲解一下主题的功能定制，除了基本的功能定制外，还有我参考各个大佬们的功能，有些我虽然没有加在我的博客上，但是也列在了此处。所以先在此处感谢一下各位大佬的博客文章。</p>
<p><a href="https://github.com/blinkfox/hexo-theme-matery">闪烁之狐的原版定制</a> | <a href="https://godweiyang.com/2018/04/13/hexo-blog/">Godweiyang</a> | <a href="https://sunhwee.com/posts/6e8839eb.html">洪卫</a> | <a href="https://blog.sky03.cn/2019/42790.html">Sky03</a></p>
<h3 id="1更换主题">1.更换主题<a hidden class="anchor" aria-hidden="true" href="#1更换主题">#</a></h3>
<p>下载主题，解压到博客目录下的<code>themes</code>目录，修改根目录下的 <code>_config.yml</code> 的 <code>theme</code> 的值：<code>theme: hexo-theme-matery</code></p>
<h3 id="2设置文章模板">2.设置文章模板<a hidden class="anchor" aria-hidden="true" href="#2设置文章模板">#</a></h3>
<p><code>Hexo</code>的页面是包括一个<code>md</code>文件和<code>ejs</code>文件结合而成的，<code>md</code>文件中的内容是页面配置，基本信息，和显示的内容。而<code>ejs</code>文件就是<code>js</code>逻辑代码了。</p>
<p>我们在<code>scaffolds/post.md</code>中设置文章的默认模板，这样以后创建文章的时候，这些信息就默认添加上了，不同文章你也可以修改这些信息。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">---
title: <span style="color:#f92672">{{</span> title <span style="color:#f92672">}}</span>
date: <span style="color:#f92672">{{</span> date <span style="color:#f92672">}}</span>
top: false
cover: false
password:
toc: true
mathjax: true
summary:
tags:
categories:
---
</code></pre></div><h3 id="3添加404页面">3.添加404页面<a hidden class="anchor" aria-hidden="true" href="#3添加404页面">#</a></h3>
<p>原来的主题没有404页面，所以我们自己添加一个。首先在<code>/source/</code>目录下新建一个<code>404.md</code>，内容如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">---
title: <span style="color:#ae81ff">404</span>
date: 2019-07-19 16:41:10
type: <span style="color:#e6db74">&#34;404&#34;</span>
layout: <span style="color:#e6db74">&#34;404&#34;</span>
description: <span style="color:#e6db74">&#34;你来到了没有知识的荒原 :(&#34;</span>
---
</code></pre></div><p>然后在<code>/themes/matery/layout/</code>目录下新建一个<code>404.ejs</code>文件，内容如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;style type<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/css&#34;</span>&gt;
    /* don<span style="color:#e6db74">&#39;t remove. */
</span><span style="color:#e6db74">    .about-cover {
</span><span style="color:#e6db74">        height: 75vh;
</span><span style="color:#e6db74">    }
</span><span style="color:#e6db74">&lt;/style&gt;
</span><span style="color:#e6db74">&lt;div class=&#34;bg-cover pd-header about-cover&#34;&gt;
</span><span style="color:#e6db74">    &lt;div class=&#34;container&#34;&gt;
</span><span style="color:#e6db74">        &lt;div class=&#34;row&#34;&gt;
</span><span style="color:#e6db74">            &lt;div class=&#34;col s10 offset-s1 m8 offset-m2 l8 offset-l2&#34;&gt;
</span><span style="color:#e6db74">                &lt;div class=&#34;brand&#34;&gt;
</span><span style="color:#e6db74">                    &lt;div class=&#34;title center-align&#34;&gt;
</span><span style="color:#e6db74">                        404
</span><span style="color:#e6db74">                    &lt;/div&gt;
</span><span style="color:#e6db74">                    &lt;div class=&#34;description center-align&#34;&gt;
</span><span style="color:#e6db74">                        &lt;%= page.description %&gt;
</span><span style="color:#e6db74">                    &lt;/div&gt;
</span><span style="color:#e6db74">                &lt;/div&gt;
</span><span style="color:#e6db74">            &lt;/div&gt;
</span><span style="color:#e6db74">        &lt;/div&gt;
</span><span style="color:#e6db74">    &lt;/div&gt;
</span><span style="color:#e6db74">&lt;/div&gt;
</span><span style="color:#e6db74">&lt;script&gt;
</span><span style="color:#e6db74">    // 每天切换 banner 图.  Switch banner image every day.
</span><span style="color:#e6db74">    $(&#39;</span>.bg-cover<span style="color:#e6db74">&#39;).css(&#39;</span>background-image<span style="color:#e6db74">&#39;, &#39;</span>url<span style="color:#f92672">(</span>/medias/banner/<span style="color:#e6db74">&#39; + new Date().getDay() + &#39;</span>.jpg<span style="color:#f92672">)</span><span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#f92672">)</span>;
&lt;/script&gt;
</code></pre></div><h3 id="4添加二级菜单">4.添加二级菜单<a hidden class="anchor" aria-hidden="true" href="#4添加二级菜单">#</a></h3>
<p>因为我使用的是最新版的主题代码，所以二级菜单可以直接在主题的配置文件<code>_config.yml</code>中配置，而不需要自己添加代码。如果你是老版本的主题，那么你可以参考上述两位大佬的博客进行添加代码。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">  <span style="color:#75715e"># 二级菜单写法如下</span>
  Medias:
    icon: fas fa-list
    children:
      - name: Books
        url: /books
        icon: fas fa-book
      - name: Musics
        url: /musics
        icon: fas fa-music
      - name: Movies
        url: /movies
        icon: fas fa-film
      - name: Galleries
        url: /galleries
        icon: fas fa-image
</code></pre></div><p>这样我们就可以在导航栏中看见媒体的图标以及二级图标了，不过由于我们没有创建对应的页面，所以无法看见内容。这里只举例说一下<code>musics</code>页面的创建。</p>
<p>先使用命令创建<code>musics</code>对应的<code>md</code>文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">hexo new page <span style="color:#e6db74">&#34;musics&#34;</span>
</code></pre></div><p>这样就在<code>source</code>目录下生成一个<code>musics</code>目录了，里面包含一个<code>index.md</code>就是<code>musics</code>页面的配置文件了。我们填入对应<code>layout</code>的<code>ejs</code>文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">---
title: musics
date: 2019-11-14 23:41:25
type: <span style="color:#e6db74">&#34;musics&#34;</span>
layout: <span style="color:#e6db74">&#34;musics&#34;</span>
---
</code></pre></div><p>然后在主题的<code>layout</code>目录下创建<code>ejs</code>文件，并写入如下内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;%- partial<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;_partial/bg-cover&#39;</span><span style="color:#f92672">)</span> %&gt;

&lt;main class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;content&#34;</span>&gt;
    &lt;div id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;contact&#34;</span> class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container chip-container&#34;</span>&gt;
                &lt;div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card&#34;</span>&gt;
                    &lt;div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-content&#34;</span> style<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-align: center&#34;</span>&gt;
                            &lt;h3 style<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 5px 0 5px 5px;&#34;</span>&gt;如果你有好的内容推荐，欢迎在下面留言！&lt;/h3&gt;
                        &lt;/div&gt;
                &lt;/div&gt;
                &lt;div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card&#34;</span>&gt;
                    &lt;% <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>theme.gitalk <span style="color:#f92672">&amp;&amp;</span> theme.gitalk.enable<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> %&gt;
                        &lt;%- partial<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;_partial/gitalk&#39;</span><span style="color:#f92672">)</span> %&gt;
                        &lt;% <span style="color:#f92672">}</span> %&gt;

                        &lt;% <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>theme.gitment.enable<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> %&gt;
                        &lt;%- partial<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;_partial/gitment&#39;</span><span style="color:#f92672">)</span> %&gt;
                        &lt;% <span style="color:#f92672">}</span> %&gt;

                        &lt;% <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>theme.disqus.enable<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> %&gt;
                        &lt;%- partial<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;_partial/disqus&#39;</span><span style="color:#f92672">)</span> %&gt;
                        &lt;% <span style="color:#f92672">}</span> %&gt;

                        &lt;% <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>theme.livere <span style="color:#f92672">&amp;&amp;</span> theme.livere.enable<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> %&gt;
                        &lt;%- partial<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;_partial/livere&#39;</span><span style="color:#f92672">)</span> %&gt;
                        &lt;% <span style="color:#f92672">}</span> %&gt;

                        &lt;% <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>theme.valine <span style="color:#f92672">&amp;&amp;</span> theme.valine.enable<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> %&gt;
                        &lt;%- partial<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;_partial/valine&#39;</span><span style="color:#f92672">)</span> %&gt;
                        &lt;% <span style="color:#f92672">}</span> %&gt;
                &lt;/div&gt;
        &lt;/div&gt;
&lt;/main&gt;

</code></pre></div><p>这样一个页面就创建好了，具体内容可自行修改，其他页面也是如此创建的。</p>
<blockquote>
<p>这里有一个bug，就是二级菜单不显示中文，解决方法请见Debug部分。</p>
</blockquote>
<h3 id="5图片添加水印">5.图片添加水印<a hidden class="anchor" aria-hidden="true" href="#5图片添加水印">#</a></h3>
<p>为了防止别人抄袭你文章，可以把所有的图片都加上水印，方法很简单。首先在博客根目录下新建一个<code>watermark.py</code>，代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># -*- coding: utf-8 -*-</span>
<span style="color:#f92672">import</span> sys
<span style="color:#f92672">import</span> glob
<span style="color:#f92672">from</span> PIL <span style="color:#f92672">import</span> Image
<span style="color:#f92672">from</span> PIL <span style="color:#f92672">import</span> ImageDraw
<span style="color:#f92672">from</span> PIL <span style="color:#f92672">import</span> ImageFont

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">watermark</span>(post_name):
    <span style="color:#66d9ef">if</span> post_name <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;all&#39;</span>:
        post_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;*&#39;</span>
    dir_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;source/_posts/&#39;</span> <span style="color:#f92672">+</span> post_name <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;/*&#39;</span>
    <span style="color:#66d9ef">for</span> files <span style="color:#f92672">in</span> glob<span style="color:#f92672">.</span>glob(dir_name):
        im <span style="color:#f92672">=</span> Image<span style="color:#f92672">.</span>open(files)
        <span style="color:#66d9ef">if</span> len(im<span style="color:#f92672">.</span>getbands()) <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3</span>:
            im <span style="color:#f92672">=</span> im<span style="color:#f92672">.</span>convert(<span style="color:#e6db74">&#39;RGB&#39;</span>)
            print(files)
        font <span style="color:#f92672">=</span> ImageFont<span style="color:#f92672">.</span>truetype(<span style="color:#e6db74">&#39;STSONG.TTF&#39;</span>, max(<span style="color:#ae81ff">30</span>, int(im<span style="color:#f92672">.</span>size[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">/</span> <span style="color:#ae81ff">20</span>)))
        draw <span style="color:#f92672">=</span> ImageDraw<span style="color:#f92672">.</span>Draw(im)
        draw<span style="color:#f92672">.</span>text((im<span style="color:#f92672">.</span>size[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, im<span style="color:#f92672">.</span>size[<span style="color:#ae81ff">1</span>] <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>),
                  <span style="color:#e6db74">u</span><span style="color:#e6db74">&#39;@hiyoung&#39;</span>, fill<span style="color:#f92672">=</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>), font<span style="color:#f92672">=</span>font)
        im<span style="color:#f92672">.</span>save(files)

<span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;__main__&#39;</span>:
    <span style="color:#66d9ef">if</span> len(sys<span style="color:#f92672">.</span>argv) <span style="color:#f92672">==</span> <span style="color:#ae81ff">2</span>:
        watermark(sys<span style="color:#f92672">.</span>argv[<span style="color:#ae81ff">1</span>])
    <span style="color:#66d9ef">else</span>:
        print(<span style="color:#e6db74">&#39;[usage] &lt;input&gt;&#39;</span>)

</code></pre></div><p>字体也放根目录下，自己找字体。然后每次写完一篇文章可以运行<code>python3 watermark.py postname</code>添加水印，如果第一次运行要给所有文章添加水印，可以运行<code>python3 watermark.py all</code>。</p>
<blockquote>
<p>这个代码的逻辑就是从文章目录下拿到图片，添加水印。这个前提是要文章的图片放在source/_posts/下，所以如果在文章中直接引用了其他地方的图片链接，那么这个脚本不会去给那个图片加水印了。</p>
</blockquote>
<h3 id="6动态标签栏">6.动态标签栏<a hidden class="anchor" aria-hidden="true" href="#6动态标签栏">#</a></h3>
<p>这个功能我没有添加，只是简单的一段代码，在<code>theme/matery/layout/layout.ejs</code>下添加如下代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text/javascript&#34;</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">OriginTitile</span> <span style="color:#f92672">=</span> document.<span style="color:#a6e22e">title</span>, <span style="color:#a6e22e">st</span>; document.<span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#34;visibilitychange&#34;</span>, <span style="color:#66d9ef">function</span> () { document.<span style="color:#a6e22e">hidden</span> <span style="color:#f92672">?</span> (document.<span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Σ(っ °Д °;)っ喔哟，崩溃啦！&#34;</span>, <span style="color:#a6e22e">clearTimeout</span>(<span style="color:#a6e22e">st</span>)) <span style="color:#f92672">:</span> (document.<span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;φ(゜▽゜*)♪咦，又好了！&#34;</span>, <span style="color:#a6e22e">st</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setTimeout</span>(<span style="color:#66d9ef">function</span> () { document.<span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">OriginTitile</span> }, <span style="color:#ae81ff">3e3</span>)) }) <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/script&gt;</span>
</code></pre></div><h3 id="7添加豆瓣插件">7.添加豆瓣插件<a hidden class="anchor" aria-hidden="true" href="#7添加豆瓣插件">#</a></h3>
<p>我的二级菜单书单和电影都是通过豆瓣插件来添加内容的。</p>
<p>首先安装插件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install hexo-douban --save
</code></pre></div><p>将下面的配置写入博客的 <code>_config.yml</code> 文件里：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">douban:
  user: <span style="color:#75715e">#填写你的豆瓣id，打开豆瓣，登入账户，然后在右上角点击 ”个人主页“，url的后面就是id。</span>
  builtin: true
  book:
    title: <span style="color:#e6db74">&#39;我的无味书屋！&#39;</span>
    quote: <span style="color:#e6db74">&#39;沉醉于知识的hiyoung.&#39;</span>
  movie:
    title: <span style="color:#e6db74">&#39;电影推荐&#39;</span>
    quote: <span style="color:#e6db74">&#39;沉醉于电影的hiyoung.&#39;</span>
  <span style="color:#75715e">#game:　不想要的内容可注释掉</span>
  <span style="color:#75715e">#  title: &#39;This is my game title&#39;</span>
  <span style="color:#75715e">#  quote: &#39;This is my game quote&#39;</span>
  timeout: <span style="color:#ae81ff">10000</span>

</code></pre></div><p>然后创建对应的页面，在页面的<code>ejs</code>文件中添加如下代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&lt;%-</span> <span style="color:#a6e22e">partial</span>(<span style="color:#e6db74">&#39;_partial/bg-cover&#39;</span>) <span style="color:#f92672">%&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">style</span><span style="color:#f92672">&gt;</span>
    .<span style="color:#a6e22e">hexo</span><span style="color:#f92672">-</span><span style="color:#a6e22e">douban</span><span style="color:#f92672">-</span><span style="color:#a6e22e">picture</span> <span style="color:#a6e22e">img</span> {
        <span style="color:#a6e22e">width</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">100</span><span style="color:#f92672">%</span>;
        }
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/style&gt;</span>

<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">main</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;content&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;contact&#34;</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;container chip-container&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card&#34;</span><span style="color:#f92672">&gt;</span>
                    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-content&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;padding: 30px&#34;</span><span style="color:#f92672">&gt;</span>
                            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">h1</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 10px 0 10px 0px;&#34;</span><span style="color:#f92672">&gt;</span>
                                        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tag-title center-align&#34;</span><span style="color:#f92672">&gt;</span>
                                        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">i</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fas fa-book&#34;</span><span style="color:#f92672">&gt;&lt;</span><span style="color:#960050;background-color:#1e0010">/i&gt;&amp;nbsp;&amp;nbsp;&lt;%- page.title %&gt;</span>
                    <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
                                <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/h1&gt;</span>
                                <span style="color:#f92672">&lt;%-</span> <span style="color:#a6e22e">page</span>.<span style="color:#a6e22e">content</span> <span style="color:#f92672">%&gt;</span>
                        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
                <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
                <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card&#34;</span><span style="color:#f92672">&gt;</span>
                    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-content&#34;</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text-align: center&#34;</span><span style="color:#f92672">&gt;</span>
                            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">h3</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;margin: 5px 0 5px 5px;&#34;</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">如果你有好的内容推荐</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">欢迎在下面留言</span><span style="color:#960050;background-color:#1e0010">！</span><span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/h3&gt;</span>
                        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
                <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
                <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card&#34;</span><span style="color:#f92672">&gt;</span>
                    <span style="color:#f92672">&lt;%</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">gitalk</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">gitalk</span>.<span style="color:#a6e22e">enable</span>) { <span style="color:#f92672">%&gt;</span>
                        <span style="color:#f92672">&lt;%-</span> <span style="color:#a6e22e">partial</span>(<span style="color:#e6db74">&#39;_partial/gitalk&#39;</span>) <span style="color:#f92672">%&gt;</span>
                        <span style="color:#f92672">&lt;%</span> } <span style="color:#f92672">%&gt;</span>

                        <span style="color:#f92672">&lt;%</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">gitment</span>.<span style="color:#a6e22e">enable</span>) { <span style="color:#f92672">%&gt;</span>
                        <span style="color:#f92672">&lt;%-</span> <span style="color:#a6e22e">partial</span>(<span style="color:#e6db74">&#39;_partial/gitment&#39;</span>) <span style="color:#f92672">%&gt;</span>
                        <span style="color:#f92672">&lt;%</span> } <span style="color:#f92672">%&gt;</span>

                        <span style="color:#f92672">&lt;%</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">disqus</span>.<span style="color:#a6e22e">enable</span>) { <span style="color:#f92672">%&gt;</span>
                        <span style="color:#f92672">&lt;%-</span> <span style="color:#a6e22e">partial</span>(<span style="color:#e6db74">&#39;_partial/disqus&#39;</span>) <span style="color:#f92672">%&gt;</span>
                        <span style="color:#f92672">&lt;%</span> } <span style="color:#f92672">%&gt;</span>

                        <span style="color:#f92672">&lt;%</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">livere</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">livere</span>.<span style="color:#a6e22e">enable</span>) { <span style="color:#f92672">%&gt;</span>
                        <span style="color:#f92672">&lt;%-</span> <span style="color:#a6e22e">partial</span>(<span style="color:#e6db74">&#39;_partial/livere&#39;</span>) <span style="color:#f92672">%&gt;</span>
                        <span style="color:#f92672">&lt;%</span> } <span style="color:#f92672">%&gt;</span>

                        <span style="color:#f92672">&lt;%</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">valine</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">valine</span>.<span style="color:#a6e22e">enable</span>) { <span style="color:#f92672">%&gt;</span>
                        <span style="color:#f92672">&lt;%-</span> <span style="color:#a6e22e">partial</span>(<span style="color:#e6db74">&#39;_partial/valine&#39;</span>) <span style="color:#f92672">%&gt;</span>
                        <span style="color:#f92672">&lt;%</span> } <span style="color:#f92672">%&gt;</span>
                <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/main&gt;</span>

</code></pre></div><p>在你的博客文件夹内找到这个文件夹 <code>/node_modules/hexo-douban/lib</code> ，这个文件夹内找到以下三个文件： <code>books-generator.js</code> 、<code>games-generator.js</code> 、<code>movies-generator.js</code></p>
<p>将每个文件内最下面的：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">layout</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;page&#39;</span>, <span style="color:#e6db74">&#39;post&#39;</span>]
</code></pre></div><p>改为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">layout</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;page&#39;</span>, <span style="color:#e6db74">&#39;books&#39;</span>]
</code></pre></div><p><code>books</code>是对应的呈现内容的<code>ejs</code>文件名。这样我们的豆瓣内容就设置完成了，可以进行编译部署了。</p>
<blockquote>
<p>通常大家都喜欢用 <code>hexo d</code> 来作为 <code>hexo deploy</code> 命令的简化，但是当安装了 <code>hexo douban</code> 之后，就不能用 <code>hexo d</code> 了，因为 <code>hexo douban</code> 跟 <code>hexo deploy</code> 的前缀都是 <code>hexo d</code> ，你以后执行的 <code>hexo d</code> 将不再是 Hexo 页面的生成，而是豆瓣页面的生成。</p>
<p>这里也说一下这个插件的逻辑，该插件通过你设置的豆瓣id，去爬取豆瓣信息。将爬取到的信息返回给对应的layout，然后进行展示。</p>
</blockquote>
<h3 id="8统一友链卡片样式">8.统一友链卡片样式<a hidden class="anchor" aria-hidden="true" href="#8统一友链卡片样式">#</a></h3>
<p>我不喜欢原版的友链显示，所以统一了颜色，打开<code>themes/matery/layout/friends.ejs</code>文件，找到如下代码并修改：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">                            <span style="color:#75715e">&lt;!--</span><span style="color:#a6e22e">修改frends卡片</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">统一样式</span> <span style="color:#f92672">--&gt;</span>
                            <span style="color:#75715e">&lt;!--</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card frind-card&lt;%- ((i % 10) +1) %&gt;&#34;</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">修改前</span><span style="color:#f92672">--&gt;</span>
                            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card frind-card1&#34;</span><span style="color:#f92672">&gt;</span>
</code></pre></div><p>它的样式颜色也在该文件中，各位可自行修改。</p>
<h3 id="9添加交换友链卡片">9.添加交换友链卡片<a hidden class="anchor" aria-hidden="true" href="#9添加交换友链卡片">#</a></h3>
<p>在<code>/source/friends/index.md</code>文件中添加要交互的信息：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 友链交换</span>
想要交换友链的大佬，欢迎在留言板留言，留言格式：
* **名称：**Hiyoung
* **地址：**https://hiyoungai.com/
* **简介：**宠辱不惊，看庭前花开花落；去留无意，望天空云卷云舒。
* **头像：**https://cdn.jsdelivr.net/gh/hiyoung123/cdn/img/avatar.jpg
</code></pre></div><p>然后在<code>friends.ejs</code>文件中的如下位置添加代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-content&#34;</span><span style="color:#f92672">&gt;</span>
                <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-content article-card-content&#34;</span><span style="color:#f92672">&gt;</span>
                    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;articleContent&#34;</span> <span style="color:#a6e22e">data</span><span style="color:#f92672">-</span><span style="color:#a6e22e">aos</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fade-up&#34;</span><span style="color:#f92672">&gt;</span>
                        <span style="color:#f92672">&lt;%-</span> <span style="color:#a6e22e">page</span>.<span style="color:#a6e22e">content</span> <span style="color:#f92672">%&gt;</span>
                    <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
                <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
            <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card&#34;</span><span style="color:#f92672">&gt;</span>

            <span style="color:#f92672">&lt;%</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">gitalk</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">gitalk</span>.<span style="color:#a6e22e">enable</span>) { <span style="color:#f92672">%&gt;</span>
</code></pre></div><h3 id="10修改各菜单首图样式">10.修改各菜单首图样式<a hidden class="anchor" aria-hidden="true" href="#10修改各菜单首图样式">#</a></h3>
<p>修改各个页面的首图为本页面标题，而不是统一的网站标题。</p>
<p>打开<code>layout/_partial/bg-cover-content.ejs</code>文件，找到如下代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;title center-align&#34;</span><span style="color:#f92672">&gt;</span>
                <span style="color:#f92672">&lt;%</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">subtitle</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">subtitle</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) { <span style="color:#f92672">%&gt;</span>
                <span style="color:#f92672">&lt;%=</span> <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">subtitle</span> <span style="color:#f92672">%&gt;</span>
                <span style="color:#f92672">&lt;%</span> } <span style="color:#66d9ef">else</span> { <span style="color:#f92672">%&gt;</span>
                <span style="color:#a6e22e">subtitle</span>
                <span style="color:#f92672">&lt;%</span> } <span style="color:#f92672">%&gt;</span>
            <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
</code></pre></div><p>修改为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;title center-align&#34;</span><span style="color:#f92672">&gt;</span>
                <span style="color:#75715e">&lt;!--</span> <span style="color:#f92672">&lt;%</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">subtitle</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">subtitle</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) { <span style="color:#f92672">%&gt;</span>
                    <span style="color:#f92672">&lt;%=</span> <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">subtitle</span> <span style="color:#f92672">%&gt;</span>
                <span style="color:#f92672">&lt;%</span> } <span style="color:#66d9ef">else</span> { <span style="color:#f92672">%&gt;</span>
                    <span style="color:#a6e22e">subtitle</span>
                <span style="color:#f92672">&lt;%</span> } <span style="color:#f92672">%&gt;</span> <span style="color:#f92672">--&gt;</span>
                <span style="color:#f92672">&lt;%</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">is_archive</span>()) { <span style="color:#f92672">%&gt;</span>
                    <span style="color:#f92672">&lt;%=</span> <span style="color:#a6e22e">__</span>(<span style="color:#e6db74">&#39;archives&#39;</span>) <span style="color:#f92672">%&gt;</span>
                <span style="color:#f92672">&lt;%</span> } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">is_category</span>()) { <span style="color:#f92672">%&gt;</span>
                    <span style="color:#f92672">&lt;%=</span> <span style="color:#a6e22e">__</span>(<span style="color:#e6db74">&#39;categories&#39;</span>) <span style="color:#f92672">%&gt;</span>
                <span style="color:#f92672">&lt;%</span> } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">is_tag</span>()) { <span style="color:#f92672">%&gt;</span>
                    <span style="color:#f92672">&lt;%=</span> <span style="color:#a6e22e">__</span>(<span style="color:#e6db74">&#39;tag&#39;</span>) <span style="color:#f92672">%&gt;</span>
                <span style="color:#f92672">&lt;%</span> } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">page</span>.<span style="color:#a6e22e">title</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">page</span>.<span style="color:#a6e22e">title</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) { <span style="color:#f92672">%&gt;</span>
                    <span style="color:#f92672">&lt;%=</span> <span style="color:#a6e22e">__</span>(<span style="color:#a6e22e">page</span>.<span style="color:#a6e22e">title</span>) <span style="color:#f92672">%&gt;</span>
                <span style="color:#f92672">&lt;%</span> } <span style="color:#66d9ef">else</span> { <span style="color:#f92672">%&gt;</span>
                    <span style="color:#f92672">&lt;%=</span> <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">subtitle</span><span style="color:#f92672">%&gt;</span>
                <span style="color:#f92672">&lt;%</span> } <span style="color:#f92672">%&gt;</span>
            <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
</code></pre></div><h3 id="11在文章中添加网易云音乐">11.在文章中添加网易云音乐<a hidden class="anchor" aria-hidden="true" href="#11在文章中添加网易云音乐">#</a></h3>
<p>首先打开网易云网页版，找到想听的歌曲，然后点击生成外链，复制<code>html</code>代码。粘贴到文章里就行了，为了美观，设置一下居中，具体代码如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;div align<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;middle&#34;</span>&gt;这里粘贴刚刚复制的代码&lt;/div&gt;
</code></pre></div><h3 id="12建站时间卜算子计数全站文字统计">12.建站时间、卜算子计数、全站文字统计<a hidden class="anchor" aria-hidden="true" href="#12建站时间卜算子计数全站文字统计">#</a></h3>
<p>新版本中已经集成了该功能，可以直接在主题的配置文件<code>_config.yml</code>中进行配置：</p>
<p>首先需要安装插件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm i --save hexo-wordcount
</code></pre></div><p>然后在<code>_config.yml</code>配置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">wordCount:
  enable: false <span style="color:#75715e"># 将这个值设置为 true 即可.</span>
  postWordCount: true
  min2read: true
  totalCount: true <span style="color:#75715e">#需要添加这个字段，原版没有　全站文字统计配置</span>
</code></pre></div><p>建站时间配置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># Website start time.</span>
<span style="color:#75715e"># 站点运行开始时间.</span>
time:
  enable: true
  year: <span style="color:#ae81ff">2019</span> <span style="color:#75715e"># 年份</span>
  month: <span style="color:#ae81ff">11</span> <span style="color:#75715e"># 月份</span>
  date: <span style="color:#ae81ff">12</span> <span style="color:#75715e"># 日期</span>
  hour: <span style="color:#ae81ff">00</span> <span style="color:#75715e"># 小时</span>
  minute: <span style="color:#ae81ff">00</span> <span style="color:#75715e"># 分钟</span>
  second: <span style="color:#ae81ff">00</span> <span style="color:#75715e"># 秒</span>
</code></pre></div><h3 id="13关于页面添加简历">13.关于页面添加简历<a hidden class="anchor" aria-hidden="true" href="#13关于页面添加简历">#</a></h3>
<p>修改<code>/themes/matery/layout/about.ejs</code>，找到<code>&lt;div class=&quot;card&quot;&gt;</code>标签，然后找到它对应的<code>&lt;/div&gt;</code>标签，接在后面新增一个card，语句如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card&#34;</span>&gt; &lt;div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-content&#34;</span>&gt; &lt;div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;card-content article-card-content&#34;</span>&gt; &lt;div class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;title center-align&#34;</span> data-aos<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zoom-in-up&#34;</span>&gt; &lt;i class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fa fa-address-book&#34;</span>&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;&lt;%- __<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;myCV&#39;</span><span style="color:#f92672">)</span> %&gt; &lt;/div&gt; &lt;div id<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;articleContent&#34;</span> data-aos<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fade-up&#34;</span>&gt; &lt;%- page.content %&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;
</code></pre></div><p>这样就会多出一张card，然后可以在<code>/source/about/index.md</code>下面写上你的简历了，当然这里的位置随你自己设置，你也可以把简历作为第一个card。</p>
<h3 id="14添加评论插件">14.添加评论插件<a hidden class="anchor" aria-hidden="true" href="#14添加评论插件">#</a></h3>
<p>主题已经自带了<code>gitalk</code>插件了，所以你只需要去<code>github</code>官网配置好就行了。</p>
<p>首先打开<a href="https://github.com/settings/applications/new">github</a>申请一个应用，要填四个东西：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Application name //应用名称，随便填 
Homepage URL //填自己的博客地址 
Application description //应用描述，随便填 
Authorization callback URL //填自己的博客地址
</code></pre></div><p>然后点击注册，会出现两个字符串<code>Client ID</code>和<code>Client Secret</code>，这个要复制出来。</p>
<p>然后去主题的配置文件<code>_config.yml</code>下修改<code>gitalk</code>那里：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">gitalk: enable: true 
  owner: 你的github用户名  
  repo: 你的github用户名.github.io 
  oauth: 
    clientId: 粘贴刚刚注册完显示的字符串 
    clientSecret: 粘贴刚刚注册完显示的字符串 
  admin: 你的github用户名
</code></pre></div><p>以后写文章的时候，只要在文章页面登陆过<code>github</code>，就会自动创建评论框，<strong>记得每次写完文章后打开博客文章页面一下</strong>。</p>
<h3 id="15添加rss插件">15.添加RSS插件<a hidden class="anchor" aria-hidden="true" href="#15添加rss插件">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install hexo-generator-feed --save
</code></pre></div><p>在<code>Hexo</code>根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">feed:
  type: atom
  path: atom.xml
  limit: <span style="color:#ae81ff">20</span>
  hub:
  content:
  content_limit: <span style="color:#ae81ff">140</span>
  content_limit_delim: <span style="color:#e6db74">&#39; &#39;</span>
  order_by: -date
</code></pre></div><p>执行 <code>hexo clean &amp;&amp; hexo g</code> 重新生成博客文件，然后在 <code>public</code> 文件夹中即可看到 <code>atom.xml</code> 文件，说明你已经安装成功了。</p>
<h3 id="16添加搜索插件">16.添加搜索插件<a hidden class="anchor" aria-hidden="true" href="#16添加搜索插件">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install hexo-generator-search --save
</code></pre></div><p>在根目录下的 <code>_config.yml</code> 文件中，新增以下的配置项：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">search:
  path: search.xml
  field: post
</code></pre></div><h3 id="17添加代码高亮插件">17.添加代码高亮插件<a hidden class="anchor" aria-hidden="true" href="#17添加代码高亮插件">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm i -S hexo-prism-plugin
</code></pre></div><p>然后，修改根目录下 <code>_config.yml</code> 文件中 <code>highlight.enable</code> 的值为 <code>false</code>，并新增 <code>prism</code> 插件相关的配置，主要配置如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">highlight:
  enable: false

prism_plugin:
  mode: <span style="color:#e6db74">&#39;preprocess&#39;</span>    <span style="color:#75715e"># realtime/preprocess</span>
  theme: <span style="color:#e6db74">&#39;tomorrow&#39;</span>
  line_number: false    <span style="color:#75715e"># default false</span>
  custom_css:
</code></pre></div><h3 id="18修改打赏功能">18.修改打赏功能<a hidden class="anchor" aria-hidden="true" href="#18修改打赏功能">#</a></h3>
<p>在主题文件的 <code>source/medias/reward</code> 文件中，你可以替换成你的的微信和支付宝的打赏二维码图片。</p>
<h3 id="19修改页脚">19.修改页脚<a hidden class="anchor" aria-hidden="true" href="#19修改页脚">#</a></h3>
<p>页脚信息可能需要做定制化修改，而且它不便于做成配置信息，所以可能需要你自己去再修改和加工。修改的地方在主题文件的 <code>/layout/_partial/footer.ejs</code> 文件中，包括站点、使用的主题、访问量等。</p>
<h3 id="20修改社交链接">20.修改社交链接<a hidden class="anchor" aria-hidden="true" href="#20修改社交链接">#</a></h3>
<p>在主题的 <code>_config.yml</code> 文件中，默认支持 <code>QQ</code>、<code>GitHub</code> 和邮箱等的配置，你可以在主题文件的 <code>/layout/_partial/social-link.ejs</code> 文件中，新增、修改你需要的社交链接地址，增加链接可参考如下代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&lt;% <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>theme.socialLink.github<span style="color:#f92672">)</span> <span style="color:#f92672">{</span> %&gt;
    &lt;a href<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;%= theme.socialLink.github %&gt;&#34;</span> class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tooltipped&#34;</span> target<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;_blank&#34;</span> data-tooltip<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;访问我的GitHub&#34;</span> data-position<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;top&#34;</span> data-delay<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;50&#34;</span>&gt;
        &lt;i class<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fab fa-github&#34;</span>&gt;&lt;/i&gt;
    &lt;/a&gt;
&lt;% <span style="color:#f92672">}</span> %&gt;
</code></pre></div><p>其中，社交图标（如：<code>fa-github</code>）你可以在 <a href="https://fontawesome.com/icons">Font Awesome</a> 中搜索找到。以下是常用社交图标的标识，供你参考：</p>
<ul>
<li>Facebook: <code>fab fa-facebook</code></li>
<li>Twitter: <code>fab fa-twitter</code></li>
<li>Google-plus: <code>fab fa-google-plus</code></li>
<li>Linkedin: <code>fab fa-linkedin</code></li>
<li>Tumblr: <code>fab fa-tumblr</code></li>
<li>Medium: <code>fab fa-medium</code></li>
<li>Slack: <code>fab fa-slack</code></li>
<li>Sina Weibo: <code>fab fa-weibo</code></li>
<li>Wechat: <code>fab fa-weixin</code></li>
<li>QQ: <code>fab fa-qq</code></li>
<li>Zhihu: <code>fab fa-zhihu</code></li>
</ul>
<h3 id="21添加聊天功能">21.添加聊天功能<a hidden class="anchor" aria-hidden="true" href="#21添加聊天功能">#</a></h3>
<p>前往 <a href="http://www.daovoice.io/">DaoVoice</a> 官网注册并且获取 <code>app_id</code>，并将 <code>app_id</code> 填入主题的 <code>_config.yml</code> 文件中。</p>
<p>前往 <a href="https://www.tidio.com/">Tidio</a> 官网注册并且获取 <code>Public Key</code>，并将 <code>Public Key</code> 填入主题的 <code>_config.yml</code> 文件中。</p>
<h2 id="第四部分优化">第四部分：优化<a hidden class="anchor" aria-hidden="true" href="#第四部分优化">#</a></h2>
<h3 id="1url优化">1.URL优化<a hidden class="anchor" aria-hidden="true" href="#1url优化">#</a></h3>
<p>使用插件优化<code>url</code>，插件<code>hexo-abbrlink</code>实现了这个功能，它将原来的<code>URL</code>地址重新进行了进制转换和再编码。</p>
<p>安装<code>hexo-abbrlink</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install hexo-abbrlink --save
</code></pre></div><p>配置博客根目录下的<code>_config.yml</code>文件。</p>
<h3 id="2cdn优化">2.CDN优化<a hidden class="anchor" aria-hidden="true" href="#2cdn优化">#</a></h3>
<p>用法：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">https://cdn.jsdelivr.net/gh/你的用户名/你的仓库名@发布的版本号/文件路径
</code></pre></div><p>如本文的图片：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">https://cdn.jsdelivr.net/gh/hiyoung123/CDN/img/img_hexo_github_new_rep.png
</code></pre></div><h3 id="3压缩代码">3.压缩代码<a hidden class="anchor" aria-hidden="true" href="#3压缩代码">#</a></h3>
<p>首先安装插件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install hexo-neat --save
</code></pre></div><p>在根目录配置文件 <code>_config.yml</code> 末尾加入以下配置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#hexo-neat 优化提速插件（去掉HTML、css、js的blank字符）</span>
neat_enable: true
neat_html:
  enable: true
  exclude:
    - <span style="color:#e6db74">&#39;**/*.md&#39;</span>
neat_css:
  enable: true
  exclude:
    - <span style="color:#e6db74">&#39;**/*.min.css&#39;</span>
neat_js:
  enable: true
  mangle: true
  output:
  compress:
  exclude:
    - <span style="color:#e6db74">&#39;**/*.min.js&#39;</span>
    - <span style="color:#e6db74">&#39;**/**/instantpage.js&#39;</span>
    - <span style="color:#e6db74">&#39;**/matery.js&#39;</span>
</code></pre></div><h3 id="4双部署到coding">4.双部署到Coding<a hidden class="anchor" aria-hidden="true" href="#4双部署到coding">#</a></h3>
<p><code>Github</code> &amp; <code>Coding Pages</code> 双部署,对国内,国外用户进行分流访问,以提升网站的访问速度.
<code>Github Pages</code> 的部署前面已经说了,这里就讲一讲 <code>Coding Pages</code> 如何部署.其实与 <code>Github Pages</code> 也类似,先到<code>coding</code>官网注册,创建一个与用户名同名的仓库,添加仓库地址到配置文件中,在根目录<code>_config.yml</code>对应地方添加如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">deploy:
  - type: git
    repo:
      github: https://github.com/hiyoung123/hiyoung123.github.io
      coding: https://e.coding.net/hiyoung123/hiyoung123.coding.me.git
    branch: master
</code></pre></div><h3 id="5图片懒加载">5.图片懒加载<a hidden class="anchor" aria-hidden="true" href="#5图片懒加载">#</a></h3>
<p>安装插件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install hexo-lazyload-image --save
</code></pre></div><p>然后在根目录配置文件末尾加入以下代码</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">lazyload:
  enable: true 
  onlypost: false  <span style="color:#75715e"># 是否只对文章的图片做懒加载</span>
  loadingImg: <span style="color:#75715e"># eg ./images/loading.gif</span>
</code></pre></div><p>但是一般情况下懒加载和gallery插件会发生冲突，结果可能就是点开图片，左翻右翻都是loading image。<code>matery</code>主题的解决方案是：修改 <code>/themes/matery/source/js</code> 中的 <code>matery.js</code>文件</p>
<p>在第108行加上：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">$</span>(document).<span style="color:#a6e22e">find</span>(<span style="color:#e6db74">&#39;img[data-original]&#39;</span>).<span style="color:#a6e22e">each</span>(<span style="color:#66d9ef">function</span>(){
    <span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">this</span>).<span style="color:#a6e22e">parent</span>().<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#34;href&#34;</span>, <span style="color:#a6e22e">$</span>(<span style="color:#66d9ef">this</span>).<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#34;data-original&#34;</span>));
});
</code></pre></div><p>做完这步之后，还有点小Bug，首页的logo点击会直接打开logo图，而不是跳到首页。</p>
<p>伪解决方案：打开 <code>/themes/matery/layout/_partial/header.ejs</code>文件，</p>
<p>在<code>img</code>和<code>span</code>的两个头加个<code>div</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;brand-logo&#34;</span><span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;%- url_for() %&gt;&#34;</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;waves-effect waves-light&#34;</span><span style="color:#f92672">&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">div</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;%</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">logo</span> <span style="color:#f92672">!==</span> <span style="color:#66d9ef">undefined</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">theme</span>.<span style="color:#a6e22e">logo</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) { <span style="color:#f92672">%&gt;</span>
            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">img</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&lt;%= theme.logo %&gt;&#34;</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;logo-img&#34;</span> <span style="color:#a6e22e">alt</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;LOGO&#34;</span><span style="color:#f92672">&gt;</span>
            <span style="color:#f92672">&lt;%</span> } <span style="color:#f92672">%&gt;</span>
            <span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span> <span style="color:#66d9ef">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;logo-span&#34;</span><span style="color:#f92672">&gt;&lt;%-</span> <span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">title</span> <span style="color:#f92672">%&gt;&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;</span>
        <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
    <span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/a&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#960050;background-color:#1e0010">/div&gt;</span>
</code></pre></div><p>其实第一次加载后本地都是有缓存的，如果每次都把loading显示出来就不那么好看。所以我们需要对插件进行魔改，让图片稍微提前加载，避开加载动画。</p>
<p>打开 <code>Hexo根目录</code>&gt;<code>node_modules</code> &gt; <code>hexo-lazyload-image</code> &gt; <code>lib</code> &gt; <code>simple-lazyload.js</code> 文件第9行修改为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">rect</span>.<span style="color:#a6e22e">top</span> <span style="color:#f92672">&lt;=</span> (window.<span style="color:#a6e22e">innerHeight</span> <span style="color:#f92672">+</span><span style="color:#ae81ff">240</span> <span style="color:#f92672">||</span> document.<span style="color:#a6e22e">documentElement</span>.<span style="color:#a6e22e">clientHeight</span> <span style="color:#f92672">+</span><span style="color:#ae81ff">240</span>)
</code></pre></div><p>作用：提前240个像素加载图片；当然这个值也可以根据自己情况修改。</p>
<h2 id="第五部分debug">第五部分：Debug<a hidden class="anchor" aria-hidden="true" href="#第五部分debug">#</a></h2>
<h3 id="1解决部分菜单页面标签栏不显示中文标题">1.解决部分菜单页面，标签栏不显示中文标题<a hidden class="anchor" aria-hidden="true" href="#1解决部分菜单页面标签栏不显示中文标题">#</a></h3>
<p>首先需要去<code>/themes/matery/languages/</code>下，修改<code>default.yml</code>和<code>zh-CN.yml</code>添加对应的文字信息。</p>
<p>接着在<code>mobile-nav.ejs</code>和<code>navigation.ejs</code>中添加如下代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">        <span style="color:#a6e22e">menuMap</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#34;Medias&#34;</span>, <span style="color:#e6db74">&#34;媒体&#34;</span>);
        <span style="color:#a6e22e">menuMap</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#34;Books&#34;</span>, <span style="color:#e6db74">&#34;书单&#34;</span>);
        <span style="color:#a6e22e">menuMap</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#34;Musics&#34;</span>, <span style="color:#e6db74">&#34;音乐&#34;</span>);
        <span style="color:#a6e22e">menuMap</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#34;Videos&#34;</span>, <span style="color:#e6db74">&#34;视频&#34;</span>);
        <span style="color:#a6e22e">menuMap</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#34;Galleries&#34;</span>, <span style="color:#e6db74">&#34;相册&#34;</span>);
</code></pre></div><p>找到下面的代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">span</span><span style="color:#f92672">&gt;&lt;%-</span> <span style="color:#a6e22e">childrenLink</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">%&gt;&lt;</span><span style="color:#960050;background-color:#1e0010">/span&gt;</span>
</code></pre></div><p>修改为：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#f92672">&lt;%-</span> (<span style="color:#a6e22e">config</span>.<span style="color:#a6e22e">language</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#39;zh-CN&#39;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">menuMap</span>.<span style="color:#a6e22e">has</span>(<span style="color:#a6e22e">childrenLink</span>.<span style="color:#a6e22e">name</span>)) <span style="color:#f92672">?</span> <span style="color:#a6e22e">menuMap</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">childrenLink</span>.<span style="color:#a6e22e">name</span>) <span style="color:#f92672">:</span> <span style="color:#a6e22e">childrenLink</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">%&gt;</span>
</code></pre></div><p>并在<code>head.ejs</code>文件中修改：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">page</span>.<span style="color:#a6e22e">title</span>;

    <span style="color:#75715e">// tags, categories, about pages title
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">title</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;tags&#39;</span>) {
        <span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">__</span>(<span style="color:#e6db74">&#39;tags&#39;</span>);
    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">title</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;categories&#39;</span>) {
        <span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">__</span>(<span style="color:#e6db74">&#39;categories&#39;</span>);
    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">title</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;about&#39;</span>) {
        <span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">__</span>(<span style="color:#e6db74">&#39;about&#39;</span>);
    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">title</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;contact&#39;</span>) {
        <span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">__</span>(<span style="color:#e6db74">&#39;contact&#39;</span>);
    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">title</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;friends&#39;</span>) {
        <span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">__</span>(<span style="color:#e6db74">&#39;friends&#39;</span>);
    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">title</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;musics&#39;</span>) {
        <span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">__</span>(<span style="color:#e6db74">&#39;musics&#39;</span>);
    } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">title</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;galleries&#39;</span>) {
        <span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">__</span>(<span style="color:#e6db74">&#39;galleries&#39;</span>);
    }
</code></pre></div><h3 id="2部署在coding中使用www访问域名时出现404">2.部署在coding中，使用www.访问域名时，出现404．<a hidden class="anchor" aria-hidden="true" href="#2部署在coding中使用www访问域名时出现404">#</a></h3>
<p>需要在coding部署设置中，绑定一下<code>www</code>的域名，同时需要申请证书。</p>
<h3 id="3在coding中认证失败">3.在coding中认证失败<a hidden class="anchor" aria-hidden="true" href="#3在coding中认证失败">#</a></h3>
<p>如果申请失败的话，在域名解析处将境外的解析记录关掉，然后再去申请。申请成功后再打开境外的记录。</p>
<h3 id="4使用neat插件压缩代码导致鼠标点击特效消失">4.使用neat插件压缩代码，导致鼠标点击特效消失<a hidden class="anchor" aria-hidden="true" href="#4使用neat插件压缩代码导致鼠标点击特效消失">#</a></h3>
<p>在压缩代码插件配置中修改为如下代码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">neat_js:
  enable: true
  mangle: true
  output:
  compress:
  exclude:
    - <span style="color:#e6db74">&#39;**/*.min.js&#39;</span>
    - <span style="color:#e6db74">&#39;**/**/instantpage.js&#39;</span>
    - <span style="color:#e6db74">&#39;**/matery.js&#39;</span>
    - <span style="color:#e6db74">&#39;**/clicklove.js&#39;</span>  <span style="color:#75715e">#防止影响点击特效</span>
</code></pre></div><p>5.卜算子区分www和不带www的域名，导致访问数无法同步。</p>
<p>卜算子按照域名进行统计，带www和不带www的属于两个域名。可能需要重定向解决。</p>
<p>使用cloudflare貌似可以做到域名重定向。</p>
<h2 id="更新">更新<a hidden class="anchor" aria-hidden="true" href="#更新">#</a></h2>
<h3 id="hexo-升级">hexo 升级<a hidden class="anchor" aria-hidden="true" href="#hexo-升级">#</a></h3>
<ol>
<li>
<p>打开 package.json，修改 dependencies 项：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml">  &#34;hexo&#34;: &#34;^5.0.0&#34;,
</code></pre></div></li>
<li>
<p>执行更新</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm update
</code></pre></div></li>
</ol>
<h3 id="更换butterfly主题">更换butterfly主题<a hidden class="anchor" aria-hidden="true" href="#更换butterfly主题">#</a></h3>
<ol>
<li>
<p>clone 项目到 themes 目录</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone -b master https://github.com/jerryc127/hexo-theme-butterfly.git themes/hexo-theme-butterfly
</code></pre></div></li>
<li>
<p>安装对应插件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install hexo-renderer-pug hexo-renderer-stylus
</code></pre></div></li>
<li>
<p>修改_config.yml文件</p>
<pre tabindex="0"><code> theme: hexo-theme-butterfly
</code></pre></li>
<li>
<p>执行构建等命令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">hexo clean &amp; hexo g &amp; hexo s
</code></pre></div></li>
</ol>
<h3 id="异常">异常<a hidden class="anchor" aria-hidden="true" href="#异常">#</a></h3>
<ol>
<li>
<p>prettyUrls is not a function</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm cache clean --force
delete node_modules folder
delete package-lock.json file
npm install
hexo clean; hexo g
</code></pre></div></li>
</ol>
<h2 id="鸣谢">鸣谢<a hidden class="anchor" aria-hidden="true" href="#鸣谢">#</a></h2>
<p>再次感谢下面几位大佬的博客：</p>
<p><a href="https://github.com/blinkfox/hexo-theme-matery">闪烁之狐的原版定制</a> | <a href="https://godweiyang.com/2018/04/13/hexo-blog/">Godweiyang</a> | <a href="https://sunhwee.com/posts/6e8839eb.html">洪卫</a> | <a href="https://blog.sky03.cn/2019/42790.html">Sky03</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://hiyoungai.com/tags/hexo/">Hexo</a></li>
      <li><a href="https://hiyoungai.com/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">博客搭建</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://hiyoungai.com/posts/markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/">
    <span class="title">« 上一页</span>
    <br>
    <span>Markdown基本语法</span>
  </a>
  <a class="next" href="https://hiyoungai.com/posts/arxiv%E5%AD%A6%E6%9C%AF%E8%AE%BA%E6%96%87%E6%9F%A5%E8%AF%A2%E6%8E%A5%E5%8F%A3%E8%AF%A6%E8%A7%A3/">
    <span class="title">下一页 »</span>
    <br>
    <span>Arxiv学术论文查询接口详解</span>
  </a>
</nav>

  </footer>
<span id="/posts/%E6%9C%80%E5%85%A8hexo%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%8F%8A%E4%BC%98%E5%8C%96%E6%95%99%E7%A8%8B/" class="leancloud_visitors" data-flag-title="最全Hexo博客搭建及优化教程">
<br/>
<p>💬评论</p>
<hr/>
</span>
<div id="vcomments"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script type="text/javascript">
new Valine({
    el: '#vcomments' ,
    appId: 'ILRnbdNWCDva9ch1Y5YHGPpr-gzGzoHsz',
    appKey: 'b9pW89SXRMssN7eatVkCmc1G',
    notify:  false , 
    verify:  false , 
    avatar:'monsterid', 
    placeholder: '说点什么吧...',
    visitor:  true 
});
</script>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://hiyoungai.com/">Young&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = '复制';

        function copyingDone() {
            copybutton.innerText = '已复制！';
            setTimeout(() => {
                copybutton.innerText = '复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
